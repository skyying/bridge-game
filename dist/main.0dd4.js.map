{"version":3,"sources":["webpack:///./src/images/logo.png","webpack:///./src/images/message.svg","webpack:///./src/helper/helper.js","webpack:///./src/firebase/firebase.js","webpack:///./src/firebase/config.js","webpack:///./src/components/shape/shape.js","webpack:///./src/components/constant.js","webpack:///./src/reducer/reducer.js","webpack:///./src/components/card.js","webpack:///./src/components/trick.js","webpack:///./src/components/trickScore.js","webpack:///./src/components/scoreBoard.js","webpack:///./src/components/auctionList.js","webpack:///./src/components/auction.js","webpack:///./src/components/player.js","webpack:///./src/components/auctionResult.js","webpack:///./src/components/playerReadyList.js","webpack:///./src/components/game.js","webpack:///./src/components/login.js","webpack:///./src/components/createTable.js","webpack:///./src/components/table.js","webpack:///./src/components/header.js","webpack:///./src/components/tableList.js","webpack:///./src/components/lobby.js","webpack:///./src/components/loading.js","webpack:///./src/index.js"],"names":["module","exports","__webpack_require__","p","getRandomKey","n","arguments","length","undefined","letter","Array","from","fill","map","w","Math","floor","random","join","getRandomInt","min","max","firebaseApp","a","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","app","database","auth","path","action","ref","on","data","set","id","game","shape_Heart","_ref","scale","react_default","createElement","shape_SvgContainer","ratio","d","shape_Spade","_ref2","shape_Diamond","_ref3","points","shape_Club","_ref4","_ref5","children","width","height","viewBox","transform","CARD_NUM","SUIT_SHAPE","0","1","2","3","4","CARD_RANK","DEFAULT_GAME","deal","bid","isDb","isRdb","trick","trump","order","isGameOver","ready","players","dispatch","type","store","Object","assign","redux","state","currentUser","name","isLoad","tables","es","reducer_dispatchToDatabase","tableId","slice","newTable","gameId","readyCopy","player","value","_toConsumableArray","gameIndex","currentTable","table","currentGame","pop","newGame","cards","push","targetCardIndex","findIndex","card","winnerCard","winner","isWin","targetCardInex","currentCard","maxTrick","emptySeatIndex","seat","val","card_TrickCard","className","card_Card","flipUp","_ref2$evt","evt","_ref2$name","kind","wrapperName","onClick","components_trick","Trick","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","call","fadeOutCards","Component","prevProps","_this2","setTimeout","setState","direction","_props","cardsByPlayer","currentMaxTrick","isTrickFinish","currentTrick","hand","index","trickCards","sort","cardA","cardB","userHand","key","filter","trickScore","TrickScore","trickScore_classCallCheck","trickScore_possibleConstructorReturn","windowWidth","windowHeight","scoreTeamOne","scoreTeamTwo","winningScore","_game$players","_slicedToArray","player1","player2","player3","player4","innerStyle","resizeRatio","thumbnailStyle","thumbnailSize","style","minWidth","scoreBoard","ScoreBoard","scoreBoard_classCallCheck","scoreBoard_possibleConstructorReturn","recordGame","bind","_props2","result","resultWords","playerIndex","indexOf","_game$bid","declarer","targetTrick","widnowHeight","auctionList_AuctionList","resultsNum","ceil","res","re","j","resultItem","opt","components_auction","Auction","auction_classCallCheck","auction_possibleConstructorReturn","visibility","current","updateBid","validateUserTurnAndsetTrump","newBid","isFinishAuction","isAllPass","every","isGreaterThanFour","hasValidTrump","some","_this3","isCurrentUser","console","log","trickOpt","trumpOpt","allTrickOpt","selectedTrump","DoubleBtn","ReDoubleBtn","playerThumbnails","player_Player","_ref$current","auctionResult_AuctionResult","_React$Component","AuctionResult","auctionResult_classCallCheck","auctionResult_possibleConstructorReturn","auctionResult_inherits","auctionResult_createClass","top","right","playerReadyList","PlayerReadyList","playerReadyList_classCallCheck","playerReadyList_possibleConstructorReturn","setReadyState","isEmptySeat","isAllPlayerReady","playBtns","thumbnails","includes","components_game","Game","game_classCallCheck","game_possibleConstructorReturn","endAuction","window","innerWidth","innerHeight","getNextMaxTrick","handleWinner","shuffle","suffleCardsWhenReady","handleResize","addEventListener","removeEventListener","oldGame","curentGame","apply","game_toConsumableArray","maxTrickNum","cardsMatchCurrentTrick","noTrumpCards","first","_cardsMatchCurrentTri","firstHand","game_slicedToArray","findMaxValueByTrump","arr","list","item","tmp","i","randomIndex","firstCard","isEndOfCurrentTrick","dummyMode","playerIDByCurrentUser","hands","userIndex","currentUserIndex","user","flipIndex","b","display","flat","len","mid","threeRow","cardItems","hasSameSuitWithFirstCard","cardsInHand","each","canBeClick","allowClickEvt","totalCardsInHand","suit","reduce","sum","totalSuitType","horCardStyle","left","verCardStyle","suitNum","getHandHeight","startGame","isAllReady","bottom","login","Login","login_classCallCheck","login_possibleConstructorReturn","handleName","e","target","onChange","Link","to","components_createTable","CreateTable","createTable_classCallCheck","createTable_possibleConstructorReturn","components_table","Table","table_classCallCheck","table_possibleConstructorReturn","createNewGame","match","params","components_header","Header","header_classCallCheck","header_possibleConstructorReturn","src","logo_default","message_default","tableList","TableList","tableList_classCallCheck","tableList_possibleConstructorReturn","addPlayerToTable","createTable","newTableId","tablesLink","lastIndex","lobby","Lobby","lobby_classCallCheck","lobby_possibleConstructorReturn","loading","Loading","loading_classCallCheck","loading_possibleConstructorReturn","src_App","App","src_classCallCheck","src_possibleConstructorReturn","getState","handleLogin","update","stopLoading","unSubscribe","subscribe","BrowserRouter","Route","render","_extends","exact","react_dom_default","document","getElementById"],"mappings":"yIAAAA,EAAAC,QAAA,q5ECAAD,EAAAC,QAAiBC,EAAAC,EAAuB,4QCiB3BC,oBAAe,WAAW,IAAVC,EAAUC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,EAC3BG,EAAS,qDACb,OAAOC,MAAMC,MAAMJ,OAAQF,IACxBO,KAAK,GACLC,IAAI,SAAAC,GAAA,OAAKL,EAAOM,KAAKC,MAAMD,KAAKE,UAAYR,EAAOF,OAAS,OAC5DW,KAAK,MASGC,EAAe,SAACC,EAAKC,GAChC,OAAON,KAAKC,MAAMD,KAAKE,UAAYI,EAAMD,EAAM,IAAMA,2BC7BnDE,SAAcC,EAASC,eCFzBC,OAAQ,0CACRC,WAAY,8BACZC,YAAa,qCACbC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,iBDDRC,GACPT,EAAYU,WACVV,EAAYW,OACH,SAACC,EAAMC,GACpB,OAAOb,EACJU,WACAI,IAAIF,GACJG,GAAG,QAASF,KAPNJ,EASI,SAACG,EAAMI,GACpB,OAAOhB,EACJU,WACAI,IAAIF,GACJK,IAAID,IAbEP,EAeU,SAACS,EAAIF,GACxBhB,EACGU,WACAI,IAFH,UAEiBI,EAFjB,KAGGD,IAAID,IAnBEP,EAqBgB,SAACG,EAAMO,GAChCnB,EACGU,WACAI,IAAI,UAAYF,GAChBK,IAAIE,IExBEC,EAAQ,SAAAC,GAAa,IAAXC,EAAWD,EAAXC,MACrB,OACEC,EAAAtB,EAAAuB,cAACC,GAAaH,MAAOA,EAAOI,MAAO,IAAMpC,KAL9B,WAMTiC,EAAAtB,EAAAuB,cAAA,QAAMG,EAAE,gxBAKDC,EAAQ,SAAAC,GAAa,IAAXP,EAAWO,EAAXP,MACrB,OACEC,EAAAtB,EAAAuB,cAACC,GAAaH,MAAOA,EAAOI,MAAO,EAAGpC,KAb3B,WAcTiC,EAAAtB,EAAAuB,cAAA,QACEG,EAAE,6wBACFrC,KAfS,cAqBJwC,EAAU,SAAAC,GAAa,IAAXT,EAAWS,EAAXT,MAGvB,OACEC,EAAAtB,EAAAuB,cAACC,GAAaH,MAAOA,EAAOI,MAAO,EAAGpC,KA1B3B,WA2BTiC,EAAAtB,EAAAuB,cAAA,WACEQ,OAAWxC,iCAMNyC,EAAO,SAAAC,GAAa,IAAXZ,EAAWY,EAAXZ,MACpB,OACEC,EAAAtB,EAAAuB,cAACC,GAAaH,MAAOA,EAAOI,MAAO,IAAMpC,KAnC5B,WAoCXiC,EAAAtB,EAAAuB,cAAA,QACEG,EAAE,qpBACFrC,KAtCS,cA4CXmC,EAAe,SAAAU,GAAoC,IAAlCC,EAAkCD,EAAlCC,SAAUV,EAAwBS,EAAxBT,MAAOJ,EAAiBa,EAAjBb,MAAOhC,EAAU6C,EAAV7C,KACzC+C,EAAgB,IAARf,EACVgB,EAAS7C,KAAKC,MAAM2C,EAAQX,GAC9B,OACEH,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAA,OACEa,MAAUA,EAAV,KACAC,OAAWA,EAAX,KACAC,QAAA,OAAgBF,EAAhB,IAAyBC,GACzBf,EAAAtB,EAAAuB,cAAA,KAAGlC,KAAMA,EAAMkD,UAAA,SAAoBlB,EAApB,KACZc,MCxDEK,EACJ,GADIA,EAGL,GAOKC,GACXC,EAAG,SAAArB,GAAA,OAASC,EAAAtB,EAAAuB,cAACS,GAAKX,MAAOA,KACzBsB,EAAG,SAAAtB,GAAA,OAASC,EAAAtB,EAAAuB,cAACM,GAAQR,MAAOA,KAC5BuB,EAAG,SAAAvB,GAAA,OAASC,EAAAtB,EAAAuB,cAACJ,GAAME,MAAOA,KAC1BwB,EAAG,SAAAxB,GAAA,OAASC,EAAAtB,EAAAuB,cAACI,GAAMN,MAAOA,KAC1ByB,EAAG,SAAAzB,GAAA,OAASC,EAAAtB,EAAAuB,cAAA,mBAGDwB,GAAa,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,IAAK,IAAK,IAAK,KAExDC,GACXC,KAAM,EACNC,KACEC,MAAM,EACNC,OAAO,EACPC,MAAO,EACPC,OAAQ,GAEVC,OAAQ,EACRC,YAAY,EACZC,QAAQ,GAAO,GAAO,GAAO,GAC7BC,UAzBwB,qICFnB,IAAMC,EAAW,SAACC,EAAMhD,GAAP,OACtBiD,EAAMF,SAASG,OAAOC,WAAYH,KAAMA,GAAOhD,KAmBpCiD,EAAQC,OAAAE,EAAA,EAAAF,CAjBK,SAACG,EAAOrD,GAChC,OAAQA,EAAOgD,MACb,IAAK,eACH,OAAOE,OAAOC,UAAWE,GAAQC,YAAatD,EAAOuD,OAEvD,IAAK,eACH,OAAOL,OAAOC,UAAWE,GAAQG,OAAQxD,EAAOwD,SAElD,IAAK,mBAEH,OAAON,OAAOC,UAAWE,GAAQI,OAAQzD,EAAOyD,SAElD,QACE,OAAOJ,KAOTC,YAAa,KACbE,QAAQ,GAEVN,OAAAE,EAAA,EAAAF,CAAgBQ,EAAA,IAGLC,EAAqB,SAACX,EAAMhD,GACvC,OAAQgD,GACN,IAAK,eACH,GAAIhD,EAAO4D,QAAU,EAAG,CACtB,IAAId,EAAUV,EAAaU,QAAQe,MAAM,GACzCf,EAAQ,GAAK9C,EAAOsD,YACpB,IAAIQ,GACFZ,OAAOC,UAAWf,GAChBU,QAASA,KAGblD,EAAwBI,EAAO4D,QAASE,QAGxClE,EAAwBI,EAAO4D,SAAUxB,IAE3C,MAEF,IAAK,kBACH,IAAI9B,EAAO4C,OAAOC,UAAWf,GAC3BU,QAAS9C,EAAO8C,UAEd/C,YAAiBC,EAAO4D,QAAxB,IAAmC5D,EAAO+D,OAC9CnE,EAAkBG,EAAMO,GAE1B,IAAK,iBAGH,IACIuC,EADO7C,EAAOM,KACDuC,MACbmB,cACCnB,EAAMgB,MAAM,EAAG7D,EAAOiE,UACzBjE,EAAOkE,OAFLC,EAGCtB,EAAMgB,MAAM7D,EAAOiE,OAAS,EAAGpB,EAAMzE,UAEtC2B,YAAiBC,EAAO4D,QAAxB,IAAmC5D,EAAOoE,UAA1C,UACJxE,EAAkBG,EAAMiE,GACxB,MAEF,IAAK,wBAGH,IAAIK,EAAerE,EAAOsE,MAAM5F,IAAI,SAAA4B,GAAA,OAClC4C,OAAOC,UAAW7C,KAGhBiE,EAAcF,EAAaG,MAC3BC,EAAUvB,OAAOC,UAAWoB,GAC9BG,MAAO1E,EAAO0E,QAGhBL,EAAaM,KAAKF,GAElB7E,EAAwBI,EAAOK,GAAIgE,GACnC,MAEF,IAAK,qBAEH,IAAIA,EAAerE,EAAOsE,MAAM5F,IAAI,SAAA4B,GAAA,OAClC4C,OAAOC,UAAW7C,KAGhBiE,EAAcF,EAAaG,MAC3BE,EAAQH,EAAYG,MACxBH,EAAY5B,MAAQ3C,EAAO2C,MAG3B,IAAIiC,EAAkBF,EAAMG,UAC1B,SAAAC,GAAA,OAAQA,EAAKZ,QAAUlE,EAAO+E,WAAWb,QAEvCc,EAAShF,EAAO+E,WACpBC,EAAOC,OAAQ,EACfV,EAAYlC,KAAO2C,EAAOf,OAC1BS,EAAME,GAAmBI,EAEJ,KAAjBhF,EAAO2C,QACT4B,EAAY3B,YAAa,GAE3ByB,EAAaM,KAAKJ,GAElB3E,EAAwBI,EAAOK,GAAIgE,GACnC,MAEF,IAAK,uBAGH,IAAIA,EAAerE,EAAOsE,MAAM5F,IAAI,SAAA4B,GAAA,OAClC4C,OAAOC,UAAW7C,KAGhB8D,EAAYC,EAAajG,OAAS,EAClCmG,EAAcF,EAAaG,MAC3B7B,EAAQ3C,EAAO2C,MACnB/C,EACKI,EAAOK,GADZ,IACkB+D,EADlB,UAEEzB,GAGF,IAAI+B,EAAQH,EAAYG,MAEpBQ,EAAiBR,EAAMG,UACzB,SAAAC,GAAA,OAAQA,EAAKZ,QAAUlE,EAAOkE,QAG5BiB,EAAcT,EAAMQ,GACxBC,EAAYxC,MAAQA,EAGpB/C,EACKI,EAAOK,GADZ,IACkB+D,EADlB,QAEEpE,EAAOqC,MAKiB,IAAtB8C,EAAY1C,QAKd0C,EAAY1C,MAAQzC,EAAOoF,SAE3BD,EAAYlB,QAAUjE,EAAOqC,KAAO,EAAI,GAAK,EAE7CzC,EACKI,EAAOK,GADZ,IACkB+D,EADlB,UACqCc,EADrC,IAEEC,IAGJ,MAEF,IAAK,sBACH,IAAId,EAAerE,EAAOsE,MAAM5F,IAAI,SAAA4B,GAAA,OAClC4C,OAAOC,UAAW7C,KAGhBiE,EAAcF,EAAaG,MAE3Ba,EAAiBd,EAAYzB,QAAQ+B,UACvC,SAAAS,GAAA,ODtKkB,ICsKVA,IAEND,GAAkB,IACpBd,EAAYzB,QAAQuC,GAAkBrF,EAAOsD,YAC7Ce,EAAaM,KAAKJ,GAGlB3E,EAAwBI,EAAOK,GAAIgE,IAErC,MAEF,IAAK,iBACHzE,EACKI,EAAOK,GADZ,IACkBL,EAAOoE,UADzB,IAEEpE,EAAOM,MAET,MAEF,QACE,OAAO,OAIbV,EAAkB,SAAU,SAAAsE,GAC1B,OAAOnB,EAAS,oBAAqBU,OAAQS,EAAMqB,oBC/LxCC,EAAY,SAAAhF,GAAa,IAAX0D,EAAW1D,EAAX0D,MACzB,OACExD,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,kBACb/E,EAAAtB,EAAAuB,cAAC+E,GAAKC,QAAQ,EAAMzB,MAAOA,MAKpBwB,EAAO,SAAA1E,GAA8C,IAA5CkD,EAA4ClD,EAA5CkD,MAA4C0B,EAAA5E,EAArC6E,WAAqCxH,IAAAuH,EAA/B,KAA+BA,EAAzBD,EAAyB3E,EAAzB2E,OAAyBG,EAAA9E,EAAjBuC,YAAiBlF,IAAAyH,EAAV,KAAUA,EAC5DC,EAAOnH,KAAKC,MAAMqF,EAAQtC,GAC1BoE,EAAczC,kBAAuBA,EAAS,eAClD,OAAIoC,EAEAjF,EAAAtB,EAAAuB,cAAA,OACE8E,UAAWO,EACXC,QAAS,WACHJ,GACFA,EAAI3B,KAGRxD,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,gBACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,cACb/E,EAAAtB,EAAAuB,cAAA,OACE8E,UACW,IAATM,GAAuB,IAATA,EACV,YACA,eAEL5D,EAAU+B,EAAQtC,IAEpBC,EAAWkE,GAAM,QAOxBrF,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAWO,GACdtF,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,kBACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,2QCxCJS,cACnB,SAAAC,EAAYC,gGAAOC,CAAAC,KAAAH,GAAA,IAAAI,mKAAAC,CAAAF,MAAAH,EAAAM,WAAAvD,OAAAwD,eAAAP,IAAAQ,KAAAL,KACXF,IADW,OAEjBG,EAAKlD,OACHuD,cAAc,GAHCL,qUADc7F,EAAAtB,EAAMyH,yDAOpBC,GAAW,IAAAC,EAAAT,KACxBA,KAAKF,MAAMzD,QAAUmE,EAAUnE,QAC7B2D,KAAKF,MAAMzD,MAAQ,GAAM,EAC3BqE,WAAW,kBAAMD,EAAKE,UAAUL,cAAc,KAAQ,KAEtDN,KAAKW,UAAUL,cAAc,sCAKjC,IAAIM,GAAa,aAAc,YAAa,aAAc,aADnDC,EAQHb,KAAKF,MAJP1B,GAJKyC,EAGLxE,MAHKwE,EAILzC,OACA0C,EALKD,EAKLC,cAEAC,GAPKF,EAMLG,cANKH,EAOLE,iBAEF,IAAK3C,EACH,OAAO,KAGT,IAAI6C,EAAe,KACjBnC,EAAWiC,IA+Cb,OA5CiB,IAAbjC,IACFA,EAAW,GAITgC,IAAkBd,KAAKjD,MAAMuD,eAE/BW,EAAeH,EAAc1I,IAAI,SAAC8I,EAAMC,GAEtC,IAAIC,GADJF,EAAOA,EAAKG,KAAK,SAACC,EAAOC,GAAR,OAAkBD,EAAM1D,MAAQ2D,EAAM3D,SACjCxF,IAAI,SAAAoJ,GACxB,GAAIA,EAASrF,QAAU2C,EACrB,OACE1E,EAAAtB,EAAAuB,cAAC6E,GACCuC,IAAK9J,IACLiG,MAAO4D,EAAS5D,UAUxB,OAHYwD,EAAWM,OACT,SAAAlD,GAAA,OAAiB,OAATA,QAA0BzG,IAATyG,IACzB1G,OAAS,EAGnBsC,EAAAtB,EAAAuB,cAAA,OACE8E,UAAA,sBAAiCyB,EAAUO,GAC3CM,IAAA,cAAmBN,GAClBC,GAIE,QAKTH,IACFA,EAAeA,EAAaS,OAC1B,SAAAlD,GAAA,OAAiB,OAATA,QAA0BzG,IAATyG,KAK3BpE,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAW,cACd/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,oBAAoB8B,irBChFtBU,cACnB,SAAAC,EAAY9B,GAAO,mGAAA+B,CAAA7B,KAAA4B,oKAAAE,CAAA9B,MAAA4B,EAAAzB,WAAAvD,OAAAwD,eAAAwB,IAAAvB,KAAAL,KACXF,uUAF8B1F,EAAAtB,EAAMyH,+CAInC,IAAAM,EACiCb,KAAKF,MAAxC9F,EADE6G,EACF7G,KAAM+H,EADJlB,EACIkB,YADJlB,EACiBmB,aACxB,IAAKhI,IAASA,EAAKoE,MACjB,OAAO,KAET,IAAI6D,EAAe,EACjBC,EAAe,EAGjBlI,EAAKoE,MAAMhG,IAAI,SAACoG,EAAM2C,GACpB,IAAIgB,EAAe3D,EAAKG,MAAQ,EAAI,EAC/BwC,EAAQ,EAAK,GAAM,EACtBc,GAAgBE,EAEhBD,GAAgBC,IAdb,IAAAC,EAAAC,EAiBoCrI,EAAKwC,QAjBzC,GAiBF8F,EAjBEF,EAAA,GAiBOG,EAjBPH,EAAA,GAiBgBI,EAjBhBJ,EAAA,GAiByBK,EAjBzBL,EAAA,GAkBHM,EAAa1C,KAAKF,MAAM4C,WACxBC,EAAc3C,KAAKF,MAAMvF,OAAS,IAClCqI,GACF1H,MAAO8E,KAAKF,MAAM+C,cAClB1H,OAAQ6E,KAAKF,MAAM+C,eAGrB,OACEzI,EAAAtB,EAAAuB,cAAA,OACE8E,UACEa,KAAKF,MAAM7C,KAAX,eACmB+C,KAAKF,MAAM7C,KAC1B,cAEN6F,MAAOJ,GACPtI,EAAAtB,EAAAuB,cAAA,OACE8E,UAAU,oBACV2D,OACE5H,MAAO6G,EAAcY,IAErBvI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,iBACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SACb/E,EAAAtB,EAAAuB,cAAA,OACE8E,UAAU,kBACV2D,OAAQC,SAAqC,EAA3B/C,KAAKF,MAAM+C,gBAC7BzI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,YAAY2D,MAAOF,GAChCxI,EAAAtB,EAAAuB,cAAA,YAAOiI,EAAQ,KAEjBlI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,YAAY2D,MAAOF,GAChCxI,EAAAtB,EAAAuB,cAAA,YAAOmI,EAAQ,MAGnBpI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SAAS8C,IAE1B7H,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SACb/E,EAAAtB,EAAAuB,cAAA,OACE8E,UAAU,kBACV2D,OAAQC,SAAqC,EAA3B/C,KAAKF,MAAM+C,gBAC7BzI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,YAAY2D,MAAOF,GAChCxI,EAAAtB,EAAAuB,cAAA,YAAOkI,EAAQ,KAEjBnI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,YAAY2D,MAAOF,GAChCxI,EAAAtB,EAAAuB,cAAA,YAAOoI,EAAQ,MAGnBrI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SAAS+C,KAG7BlC,KAAKF,MAAM7E,qRCpED+H,cACnB,SAAAC,EAAYnD,gGAAOoD,CAAAlD,KAAAiD,GAAA,IAAAhD,mKAAAkD,CAAAnD,MAAAiD,EAAA9C,WAAAvD,OAAAwD,eAAA6C,IAAA5C,KAAAL,KACXF,IADW,OAEjBG,EAAKmD,WAAanD,EAAKmD,WAAWC,KAAhBpD,GAFDA,qUADmB7F,EAAAtB,EAAMyH,mDAK/B,IAAAM,EACSb,KAAKF,MAApB9F,EADM6G,EACN7G,KAAMgE,EADA6C,EACA7C,MACQ,KAAfhE,EAAKqC,OAAiB2B,GAG1BX,EAAmB,mBACjBC,QAAS0C,KAAKF,MAAMxC,QACpBG,OAAQuC,KAAKF,MAAM9B,MAAMlG,OACzB0E,QAASwD,KAAKF,MAAM9F,KAAKwC,2CAGpB,IAAA8G,EAC8CtD,KAAKF,MAArD9F,EADEsJ,EACFtJ,KAAiCgD,GAD/BsG,EACIvB,YADJuB,EACiBtB,aADjBsB,EAC+BtG,aACtC,IAAKhD,IAASA,EAAKoE,MACjB,OAAO,KAET,IAAI6D,EAAe,EACjBC,EAAe,EAGjBlI,EAAKoE,MAAMhG,IAAI,SAACoG,EAAM2C,GACpB,IAAIgB,EAAe3D,EAAKG,MAAQ,EAAI,EAC/BwC,EAAQ,EAAK,GAAM,EACtBc,GAAgBE,EAEhBD,GAAgBC,IAIpB,IAAIoB,EACG,mBADHA,EAEI,mBAEJC,EAAc,KACdC,EAAczJ,EAAKwC,QAAQkH,QAAQ1G,GAvBhC2G,EAyBiB3J,EAAKgC,IAAxB4H,EAzBED,EAyBFC,SACDC,EAAc,EA1BXF,EAyBQxH,MAsBf,OAjBIsH,GAAe,IAIbD,EAPoBI,EAAW,GAAM,EAMnCH,EAAc,GAAM,GAAKxB,GAAgB4B,EAC7BN,EAEAA,EAGZE,EAAc,GAAM,GAAKvB,GAAgB2B,EAC7BN,EAEAA,GAMlBnJ,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,mBACb/E,EAAAtB,EAAAuB,cAACsH,GACC3E,YAAagD,KAAKF,MAAM9C,YACxBzC,MAAO,GACPsI,cAAe,GACfd,YAAa/B,KAAKF,MAAMiC,YACxB+B,aAAc9D,KAAKF,MAAMkC,aACzBhI,KAAMgG,KAAKF,MAAM9F,MACjBI,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,UACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SAASqE,IAE1BpJ,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAA,UAAQsF,QAASK,KAAKoD,WAAYjE,UAAU,OAA5C,iCC9ED4E,EAAc,SAAA7J,GAAqB,IAAnBqJ,EAAmBrJ,EAAnBqJ,OAAQpJ,EAAWD,EAAXC,MACnC,IAAKoJ,EACH,OAAO,KAET,IAAIS,EAAaT,EAAOzL,OAExB,OACEsC,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,UACZlH,MAAMC,MAAMJ,OAAQQ,KAAK2L,KAAKD,EAAa,KACzC7L,KAAK,GACLC,IAAI,SAAC8L,EAAK/C,GAAN,OACH/G,EAAAtB,EAAAuB,cAAA,OAAKoH,IAAK9J,IAAgBwH,UAAU,OACjClH,MAAMC,MAAMJ,OAAQ,IAClBK,KAAK,GACLC,IAAI,SAAC+L,EAAIC,GACR,IAAIC,EAAad,EAAe,EAARpC,EAAYiD,GACpC,OAAIC,GAAcA,EAAWC,IAEzBlK,EAAAtB,EAAAuB,cAAA,OACEoH,IAAK9J,IACLwH,UAAU,cACTkF,EAAWC,KAIhBD,GACkBA,EAAWlI,OAAS,EAGpC/B,EAAAtB,EAAAuB,cAAA,OACEoH,IAAK9J,IACLwH,UAAU,cACV/E,EAAAtB,EAAAuB,cAAA,WAAMgK,EAAWlI,MAAQ,GACxBZ,EAAW8I,EAAWjI,OACrBjC,IAMJC,EAAAtB,EAAAuB,cAAA,OACEoH,IAAK9J,IACLwH,UAAU,cACT,8QCzCFoF,cACnB,SAAAC,EAAY1E,gGAAO2E,CAAAzE,KAAAwE,GAAA,IAAAvE,mKAAAyE,CAAA1E,MAAAwE,EAAArE,WAAAvD,OAAAwD,eAAAoE,IAAAnE,KAAAL,KACXF,IACF9F,EAAOiG,EAAKH,MAAM9F,KAFL,OAGjBiG,EAAKlD,OACHkE,aAAcjH,EAAKgC,IAAIG,MACvBwI,YAAY,EACZC,QAAS,MAEX3E,EAAK4E,UAAY5E,EAAK4E,UAAUxB,KAAfpD,GACjBA,EAAK6E,4BAA8B7E,EAAK6E,4BAA4BzB,KAAjCpD,GATlBA,qUADgB7F,EAAAtB,EAAMyH,kEAcbY,GAAO,IAAAV,EAAAT,KAEjC,GAAKA,KAAKF,MAAM9C,aAAgBgD,KAAKF,MAAM9F,KAA3C,CACA,IAAIA,EAAOgG,KAAKF,MAAM9F,KAEtB,GAAIA,EAAKwC,SAAWwD,KAAKF,MAAM9C,YAGNhD,EAAKwC,QAAQ+B,UAClC,SAAAZ,GAAA,OAAUA,IAAW8C,EAAKX,MAAM9C,gBAEThD,EAAK+B,MAC5BiE,KAAKW,UACHM,aAAcE,EACdyD,QAASzD,EACTwD,YAAY,uCAKVvI,GAAmB,IAAZkI,EAAYzM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KACjBkN,SACFC,GAAkB,EAClBpB,EAAW5D,KAAKF,MAAM9F,KAAKgC,IAAI4H,SAEjC,GAAIxH,GAAS,GAAe,OAAVA,EAAgB,CAChC,IAAIJ,GACFG,MAAO6D,KAAKjD,MAAMkE,aAClB7E,MAAOA,GAGLmH,EAASvD,KAAKF,MAAM9F,KAAKgC,IAAIuH,WACjCA,EAAOlF,KAAKzB,OAAOC,UAAWb,IAI9B4H,EAAW5D,KAAKF,MAAM9F,KAAK+B,KAE3BgJ,EAASnI,OAAOC,UAEdmD,KAAKF,MAAM9F,KAAKgC,IAChBA,GACC4H,SAAUA,IACVL,OAAQA,QAEN,CACL,IAAIA,EAASvD,KAAKF,MAAM9F,KAAKgC,IAAIuH,WAKjC,GAJAA,EAAOlF,MAAMiG,IAAKA,IAIdf,EAAOzL,QAAU,EAAG,CACtB,IAAImN,EAAY1B,EACbhG,MAAMgG,EAAOzL,OAAS,EAAGyL,EAAOzL,QAChCoN,MAAM,SAAAhB,GAAA,MAAmB,SAAZA,EAAII,MAChBa,EAAoB5B,EAAOzL,QAAU,EACrCsN,EAAgB7B,EAAO8B,KAAK,SAAArJ,GAAA,OAAOA,EAAIG,OAAS,IAEpD6I,EACYC,GAAaE,GAAqBC,EAIhDL,EAASnI,OAAOC,UAAWmD,KAAKF,MAAM9F,KAAKgC,KACzCuH,OAAQA,IAIZ,IAAIxH,EAAOiE,KAAKF,MAAM9F,KAAK+B,KAEzBA,EADEiJ,GACMpB,EAAW,GAAK,GAEhB7H,EAAO,GAAK,EAGtB,IAAIoC,EAAUvB,OAAOC,UAEnBmD,KAAKF,MAAM9F,MACVgC,IAAK+I,IACLhJ,KAAMA,IAGTsB,EAAmB,kBACjBtD,GAAIiG,KAAKF,MAAMxC,QACfQ,UAAWkC,KAAKF,MAAMhC,UACtB9D,KAAMmE,IAGR6B,KAAKW,UAAUgE,YAAY,EAAOC,QAAS,wCAEpC,IAAAU,EAAAtF,KAAAa,EAC0Bb,KAAKF,MAAjC9F,EADE6G,EACF7G,KAEDwC,GAHGqE,EACIvD,QADJuD,EACa/C,UAEN9D,EAAKwC,SACf+I,EACI/I,GAAWA,EAAQxC,EAAK+B,QAAUiE,KAAKF,MAAM9C,YACrDwI,QAAQC,IAAI,gBAAiBF,GAE7B,IAAI3H,EAAyB,EAAjB5D,EAAKgC,IAAIG,MAAYnC,EAAKgC,IAAII,MAGtCsJ,SAAUC,SACV/H,EAAQ,GACV8H,EAAWzN,MAAMC,MAAMJ,OAAQ,IAC5BK,KAAK,GACLC,IAAI,SAACkM,EAAKnD,GAAN,OAAgBA,IACvBwE,EAAW1N,MAAMC,MAAMJ,OAAQ,IAC5BK,KAAK,GACLC,IAAI,SAACkM,EAAKnD,GAAN,OAAgBA,KACJ,KAAVvD,GACT8H,KACAC,MACS/H,EAAQ,GAAM,GAAe,IAAVA,GAC5B8H,EAAWzN,MAAMC,MAAMJ,OAAQ,IAC5BK,KAAK,GACLC,IAAI,SAACkM,EAAKnD,GAAN,OAAgBA,IACpBO,OAAO,SAAA4C,GAAA,OAAOA,EAAMtK,EAAKgC,IAAIG,QAChCwJ,EAAW1N,MAAMC,MAAMJ,OAAQ,IAC5BK,KAAK,GACLC,IAAI,SAACkM,EAAKnD,GAAN,OAAgBA,MAEvBuE,EAAWzN,MAAMC,MAAMJ,OAAQ,IAC5BK,KAAK,GACLC,IAAI,SAACkM,EAAKnD,GAAN,OAAgBA,IACpBO,OAAO,SAAA4C,GAAA,OAAOA,GAAOtK,EAAKgC,IAAIG,QACjCwJ,EAAW1N,MAAMC,MAAMJ,OAAQ,IAC5BK,KAAK,GACLC,IAAI,SAACkM,EAAKnD,GAAN,OAAgBA,IACpBO,OAAO,SAAA4C,GAAA,OAAOA,EAAMtK,EAAKgC,IAAII,SAGlC,IAAIwJ,EAAcF,EAAStN,IAAI,SAACkM,EAAKnD,GAAN,OAC7B/G,EAAAtB,EAAAuB,cAAA,UACE8E,UAAWmF,IAAQgB,EAAKvI,MAAM6H,QAAU,UAAY,KACpDjF,QAAS,WACP2F,EAAKR,4BAA4BR,IAEnC7C,IAAK9J,KACJ2M,EAAM,KAIPuB,EACI7F,KAAKjD,MAAMkE,eAAiByE,EAAS,GACjCC,GACC,EAAG,EAAG,EAAG,EAAG,GAEX,KAAV/H,IACFiI,MAEFA,EAAgBA,EAAczN,IAAI,SAAAkM,GAAA,OAChClK,EAAAtB,EAAAuB,cAAA,OAAKsF,QAAS,kBAAM2F,EAAKT,UAAUP,EAAK,OAAO7C,IAAK9J,KACjD4D,EAAW+I,GAAK,QAIrB,IAAIf,EAASvJ,EAAKgC,IAAIuH,OAElBuC,EAAYvC,IACPA,EAAOA,EAAOzL,OAAS,GAAGwM,KACjClK,EAAAtB,EAAAuB,cAAA,UACE8E,UAAU,QACVQ,QAAS,kBAAM2F,EAAKT,WAAW,EAAG,YAFpC,UAOEkB,EAAcxC,GACwB,WAAlCA,EAAOA,EAAOzL,OAAS,GAAGwM,KAChClK,EAAAtB,EAAAuB,cAAA,UACE8E,UAAU,QACVQ,QAAS,kBAAM2F,EAAKT,WAAW,EAAG,cAFpC,YAOEmB,EAAmBhG,KAAKF,MAAM9F,KAAKwC,QAAQpE,IAAI,SAACuF,EAAQwD,GAAT,OACjD/G,EAAAtB,EAAAuB,cAAA,OACEoH,IAAK9J,IACLwH,UACEgC,IAAUmE,EAAKxF,MAAM9F,KAAK+B,KACtB,oBACA,aAEN3B,EAAAtB,EAAAuB,cAAA,YAAOsD,EAAO,OAGlB,OAAIqC,KAAKF,MAAMkF,gBAAwB,KAGrC5K,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,iBACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,mBAAmB6G,IAChChM,EAAKgC,IAAIuH,QACTnJ,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SAAf,mBAEF/E,EAAAtB,EAAAuB,cAAC0J,GAAY5J,MAAO,GAAKoJ,OAAQvJ,EAAKgC,IAAIuH,SAC1CnJ,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,kBACZoG,GACCnL,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,cACb/E,EAAAtB,EAAAuB,cAAA,UACE8E,UAAU,OACVQ,QAAS,kBAAM2F,EAAKT,UAAU,KAAM,UAFtC,QAKCiB,EACAC,GAGL3L,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,UAAUyG,GACxB5F,KAAKjD,MAAM4H,YACVvK,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,UAAU0G,cCnOxBI,SAAS,SAAA/L,GAA0B,IAAxB+C,EAAwB/C,EAAxB+C,KAAwBiJ,EAAAhM,EAAlB0K,eAAkB7M,IAAAmO,EAAV,KAAUA,EAC9C,OACE9L,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,UACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAWyF,EAAU,oBAAsB,cAChDxK,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,QAAQlC,2PCFtB,IAAMkJ,EAAb,SAAAC,GACE,SAAAC,EAAYvG,GAAO,mGAAAwG,CAAAtG,KAAAqG,oKAAAE,CAAAvG,MAAAqG,EAAAlG,WAAAvD,OAAAwD,eAAAiG,IAAAhG,KAAAL,KACXF,IAFV,gUAAA0G,CAAAH,EAAmCjM,EAAAtB,EAAMyH,WAAzCkG,EAAAJ,IAAA5E,IAAA,SAAA7D,MAAA,WAIW,IAAAiD,EACiCb,KAAKF,MAAxC9F,EADE6G,EACF7G,KAAM+H,EADJlB,EACIkB,YADJlB,EACiBmB,aACxB,IAAKhI,IAASA,EAAKgC,IAAIuH,OACrB,OAAO,KAET,IAAIyC,EAAmBhM,EAAKwC,QAAQpE,IAAI,SAACuF,EAAQwD,GAAT,OACtC/G,EAAAtB,EAAAuB,cAAA,OAAKoH,IAAK9J,IAAgBwH,UAAU,aAClC/E,EAAAtB,EAAAuB,cAAA,YAAOsD,EAAO,OAGlB,OACEvD,EAAAtB,EAAAuB,cAAA,OACE8E,UAAU,iBACV2D,OACE4D,IAAoC,EAA/BpO,KAAK2L,KAAKlC,EAAc,KAC7B4E,MAAsC,EAA/BrO,KAAK2L,KAAKlC,EAAc,OAEjC3H,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,wBACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,mBAAmB6G,GAClC5L,EAAAtB,EAAAuB,cAAC0J,GAAY5J,MAAO,IAAMoJ,OAAQvJ,EAAKgC,IAAIuH,eAvBrD8C,EAAA,oQCAqBO,cACnB,SAAAC,EAAY/G,gGAAOgH,CAAA9G,KAAA6G,GAAA,IAAA5G,mKAAA8G,CAAA/G,MAAA6G,EAAA1G,WAAAvD,OAAAwD,eAAAyG,IAAAxG,KAAAL,KACXF,IADW,OAEjBG,EAAK+G,cAAgB/G,EAAK+G,cAAc3D,KAAnBpD,GAFJA,qUADwB7F,EAAAtB,EAAMyH,oDAKnCkD,GAAa,IAAA5C,EACqBb,KAAKF,MAAjC9F,GADO6G,EACpB7D,YADoB6D,EACP7G,MAAMsD,EADCuD,EACDvD,QAASQ,EADR+C,EACQ/C,UACrBkC,KAAKF,MAAM9F,KAAKuC,MAC5Bc,EAAmB,kBACjBM,OAAQ8F,EACRnG,QAASA,EACTtD,KAAMA,EACN4D,OAAO,EACPE,UAAWA,qCAIN,IAAA2C,EAAAT,KAAAsD,EACmBtD,KAAKF,MAA1B9F,EADEsJ,EACFtJ,KAAMgD,EADJsG,EACItG,YACX,IAAKhD,EACH,OAAO,KAHF,IAMFwC,EAAqCxC,EAArCwC,QAASD,EAA4BvC,EAA5BuC,MAAmBF,GAASrC,EAArBsC,WAAqBtC,EAATqC,OAE7B4K,EAAczK,EAAQ6I,KAAK,SAAArG,GAAA,OVxBT,IUwBiBA,IACnCkI,EAAmB3K,EAAM2I,MAAM,SAAAvH,GAAA,OAAqB,IAAXA,IAI7C,KAFSsJ,GAAe5K,EAAQ,IAAO6K,GAGrC,OAAO,KAET,IAAIC,EAAW,KACXC,EAAa5K,EAAQpE,IAAI,SAACuF,EAAQwD,GAAT,OAC3B/G,EAAAtB,EAAAuB,cAAA,OACEoH,IAAK9J,IACLwH,WACmB,IAAjB5C,EAAM4E,GAAmB,YAAc,mBAEzC/G,EAAAtB,EAAAuB,cAAA,YAAOsD,EAAO,OAuBlB,OAnBInB,EAAQ6K,SAASrK,KACnBmK,EAAW3K,EAAQpE,IAAI,SAACuF,EAAQwD,GAC9B,OAAIxD,IAAWX,GAAgBT,EAAM4E,GAY5B/G,EAAAtB,EAAAuB,cAAA,OAAKoH,IAAK9J,MAVfyC,EAAAtB,EAAAuB,cAAA,OAAKoH,IAAK9J,KACRyC,EAAAtB,EAAAuB,cAAA,UACEoH,IAAK9J,IACLgI,QAAS,kBAAMc,EAAKuG,cAAc7F,IAClChC,UAAU,OAHZ,YAeR/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,qBACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,2BACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,OAAf,IAAuBiI,GACvBhN,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,OAAOgI,kyBC1DXG,cACnB,SAAAC,EAAYzH,gGAAO0H,CAAAxH,KAAAuH,GAAA,IAAAtH,mKAAAwH,CAAAzH,MAAAuH,EAAApH,WAAAvD,OAAAwD,eAAAmH,IAAAlH,KAAAL,KACXF,IACF9F,EAAOiG,EAAKH,MAAM9B,MAAMiC,EAAKH,MAAM9B,MAAMlG,OAAS,GAFrC,OAGjBmI,EAAKlD,OACH2K,WAAY1N,EAAKqC,OAAS,EAC1B0F,YAAa4F,OAAOC,WACpB5F,aAAc2F,OAAOE,aAEvB5H,EAAKc,gBAAkBd,EAAKc,gBAAgBsC,KAArBpD,GACvBA,EAAKlE,KAAOkE,EAAKlE,KAAKsH,KAAVpD,GACZA,EAAK6H,gBAAkB7H,EAAK6H,gBAAgBzE,KAArBpD,GACvBA,EAAK8H,aAAe9H,EAAK8H,aAAa1E,KAAlBpD,GACpBA,EAAK+H,QAAU/H,EAAK+H,QAAQ3E,KAAbpD,GACfA,EAAKgI,qBAAuBhI,EAAKgI,qBAAqB5E,KAA1BpD,GAC5BA,EAAKyH,WAAazH,EAAKyH,WAAWrE,KAAhBpD,GAClBA,EAAKiI,aAAejI,EAAKiI,aAAa7E,KAAlBpD,GAfHA,qUADa7F,EAAAtB,EAAMyH,qDAqBpCP,KAAKW,UACHoB,YAAa4F,OAAOC,WACpBzM,OAAQwM,OAAOE,0DAIjB7H,KAAKkI,eACLP,OAAOQ,iBAAiB,SAAUnI,KAAKkI,6DAGvCP,OAAOS,oBAAoB,SAAUpI,KAAKkI,yDAEzB1H,GACjB,IAAIrC,EAAU6B,KAAKF,MAAM9B,MAAMgC,KAAKF,MAAM9B,MAAMlG,OAAS,GACrDuQ,EAAU7H,EAAUxC,MAAMwC,EAAUxC,MAAMlG,OAAS,GAEpDqG,EAAQ5B,MAAM2I,MACb,SAACvH,EAAQwD,GAAT,OAAmBxD,IAAW0K,EAAQ9L,MAAM4E,MAG1ChD,EAAQ5B,MAAM2I,MAAM,SAAAvH,GAAA,OAAqB,IAAXA,KAChCqC,KAAKiI,sEAMT,IAAIjK,EAAQgC,KAAKF,MAAM9B,MACvB,GAAIA,EAAO,CACT,IAAIsK,EAAatK,EAAMT,MAAM,GAAGW,MACVoK,EAAW9L,QAAQ0I,MACvC,SAAAlG,GAAA,OX5DkB,IW4DVA,MAEcsJ,EAAWlK,OACjC4B,KAAKgI,qDAOT,IAAIhK,EAAQgC,KAAKF,MAAM9B,MACvB,GAAKA,EAAL,CAGA,IAAII,EAAQJ,EAAMA,EAAMlG,OAAS,GAAGsG,MAClCU,EAAWxG,KAAKM,IAAL2P,MAAAjQ,KAAAkQ,EAAYpK,EAAMhG,IAAI,SAAAoG,GAAA,OAAQA,EAAKrC,UAC9CsM,EAAcrK,EAAMsD,OAAO,SAAAlD,GAAA,OAAQA,EAAKrC,QAAU2C,IAAUhH,OAC9D,OAAiB,IAAbgH,GAAkB2J,GAAe,EAC5B3J,EAAW,EAEbA,6CAGP,IAAId,EAAQgC,KAAKF,MAAM9B,MACvB,GAAKA,EAAL,CACA,IAAII,EAAQJ,EAAMA,EAAMlG,OAAS,GAAGsG,MACpC,OAAO9F,KAAKM,IAAL2P,MAAAjQ,KAAAkQ,EAAYpK,EAAMhG,IAAI,SAAAoG,GAAA,OAAQA,EAAKrC,gDAE/ByB,GACX,IAAII,EAAQgC,KAAKF,MAAM9B,MACrBhE,EAAOgE,EAAMA,EAAMlG,OAAS,GAC5BsG,EAAQpE,EAAKoE,MACbU,EAAWkB,KAAKe,kBAEb3E,EAASpC,EAAKgC,IAAdI,MACDsM,EAAyBtK,EAC1BhG,IAAI,SAACoG,EAAM2C,GAAP,OAAiBvE,OAAOC,UAAW2B,GAAO2C,MAAOA,MACrDO,OACC,SAAAlD,GAAA,OACGA,EAAKrC,QAAU2C,GAAYN,EAAKrC,MAAQ,GAC/BqC,EAAKZ,QAAUA,IAE3Ba,SACFkK,GAAe,EAEjB,GAAsC,IAAlCD,EAAuB5Q,OAAc,CAEvC,IAAI8Q,EAAQtQ,KAAKK,IAAL4P,MAAAjQ,KAAAkQ,EACPE,EAAuBtQ,IAAI,SAAAoG,GAAA,OAAQA,EAAKnC,UAHNwM,EAKrBH,EAAuBhH,OACvC,SAAAlD,GAAA,OAAQA,EAAKnC,QAAUuM,IADpBE,EALkCC,EAAAF,EAAA,MAUjCG,EAAsB,SAACC,EAAK7M,GAChC,IAAI8M,EAAOD,EACRvH,OACC,SAAAyH,GAAA,OACE7Q,KAAKC,MAAM4Q,EAAKvL,MAAQtC,KAAmBc,IAE9CiF,KAAK,SAACC,EAAOC,GAAR,OAAkBA,EAAM3D,MAAQ0D,EAAM1D,QAC9C,OAAOsL,EAAKpR,OAASoR,EAAK,GAAK,MAIjC,GX7HkB,IW6Hd9M,EAAoB,CAEtB,IAAIgN,EAAMJ,EAAoBN,EAAwBtM,GAC1C,OAARgN,EACF3K,EAAa2K,EAEbT,GAAe,EAInB,GXvIkB,IWuIdvM,GAAsBuM,EAGxBlK,EAAauK,EACXN,EAFapQ,KAAKC,MAAMuQ,EAAUlL,MAAQtC,IAQhD,OAAOmD,GAAc,0CAGrBuB,KAAKW,UAAU+G,YAAY,iCAGxB9J,GACH,IAAII,EAAQgC,KAAKF,MAAM9B,MACvB,GAAKA,EAAL,CAGA,IAAIhE,EAAOgE,EAAMA,EAAMlG,OAAS,GAE5BuE,GADgBrC,EAAK+B,KACb/B,EAAKqC,MAAQ,GAEzBgB,EAAmB,wBACjBW,MAAOA,EACPJ,MAAOA,EACPkB,SAAUkB,KAAK8H,kBACf/N,GAAIiG,KAAKF,MAAMxC,QACfjB,MAAOA,EACPN,MAAO/B,EAAK+B,KAAO,GAAK,IAG1B,IAAI0C,EAAauB,KAAK+H,aAAanK,GAGnC,GAAIa,EAAY,CAEd,IAAID,EAAO5B,OAAOC,UAAW4B,UACtBD,EAAK2C,MAEZ9D,EAAmB,sBACjBoB,WAAYD,EACZnC,MAAOA,EACPN,KAAMyC,EAAKb,OACXK,MAAOA,EACPjE,GAAIiG,KAAKF,MAAMxC,8CAanB,IALA,IAAIc,EAAQnG,MAAMC,MAAMJ,OAAQwD,IAC7BnD,KAAK,GACLC,IAAI,SAACoG,EAAM6K,GAAP,OAAaA,IAGXA,EAAIjL,EAAMtG,OAAS,EAAGuR,EAAI,EAAGA,IAAK,CACzC,IAAIC,EAAc5Q,EAAa,EAAG4C,EAAiB,GADVpB,GAEPkE,EAAMkL,GAAclL,EAAMiL,IAA3DjL,EAAMiL,GAFkCnP,EAAA,GAE9BkE,EAAMkL,GAFwBpP,EAAA,GAM3CkE,EAAQA,EAAMhG,IAAI,SAAAoG,GAAA,OAChBZ,MAAOY,EACPrC,MAAO,KAITkB,EAAmB,yBACjBW,MAAOgC,KAAKF,MAAM9B,MAClBjE,GAAIiG,KAAKF,MAAMxC,QACfc,MAAOA,qCAIF,IAAAqC,EAAAT,KACHhC,EAAQgC,KAAKF,MAAM9B,MACnBhE,EAAOgE,EAAM5F,IAAI,SAAA4B,GAAA,OAAQ4C,OAAOC,UAAW7C,KAAOkE,MACjDE,EAAqCpE,EAArCoE,MAAO5B,EAA8BxC,EAA9BwC,QAAgBF,GAActC,EAArBuC,MAAqBvC,EAAdsC,YAIxBiN,SAEAnL,GAASA,EAAMtG,QAAU,GAAKkC,EAAKqC,MAAQ,GAAM,IACnDkN,EACUnL,EACGsD,OAAO,SAAAlD,GAAA,OAAQA,EAAKnC,MAAQ,GAAM,IAClCgF,KAAK,SAACC,EAAOC,GAAR,OAAkBA,EAAMlF,MAAQiF,EAAMjF,QAAO,IACrD,MAEZ,IAAImN,EAAsBxP,EAAKqC,MAAQ,GAAM,EAGzC2I,SACJ,GAAIhL,GAAQA,EAAKgC,KAAOhC,EAAKgC,IAAIuH,OAAQ,CACvC,IAAIA,EAASvJ,EAAKgC,IAAIuH,OACtByB,EACUzB,EAAOzL,QAAU,GACjByL,EAAO8B,KAAK,SAAArJ,GAAA,OAAOA,EAAIG,OAAS,KAChCoH,EACGhG,MAAMgG,EAAOzL,OAAS,GACtBoN,MAAM,SAAAhB,GAAA,MAAmB,SAAZA,EAAII,MAIhC,IAAImF,EAAYzE,IAAmB,EAG/BpE,GAAa,QAAS,OAAQ,QAAS,QAEvCE,SAAe4I,SAAuBC,SAG1C,GAAIvL,GAASA,EAAMtG,SAAWwD,EAAgB,CAC5CwF,EAAgBtE,EAAQpE,IAAI,SAACwR,EAAWzI,GACtC,OAAO/C,EAAMsD,OAAO,SAAClD,EAAM6K,GAAP,OAAaA,EAAI7M,EAAQ1E,SAAWqJ,MAM1D,IAAI0I,EAAmBrN,EAAQ+B,UAC7B,SAAAuL,GAAA,OAAQA,IAASrJ,EAAKX,MAAM9C,cAIxB6M,EAAmB,IACvB/I,YAAA0H,EACK1H,EAAcvD,MAAMsM,IADzBrB,EAEK1H,EAAcvD,MAAM,EAAGsM,KAE5BH,YAAAlB,EACKhM,EAAQe,MAAMsM,IADnBrB,EAEKhM,EAAQe,MAAM,EAAGsM,MAKxB,IAAIE,EAAYN,GAAazP,EAAKgC,IAAI4H,SAAW,GAAK,EAAI,EACtDmG,EAAY,IACdA,EAAYL,EAAsBnL,UAChC,SAAAZ,GAAA,OAAUA,IAAW3D,EAAKwC,QAAQuN,MAItCJ,EAAQ7I,EAAc1I,IAAI,SAAC8I,EAAMC,GAC/B,IAAIxD,EAAS+L,EAAsBvI,GAC/BsC,EAActC,EAGA,IAAd4I,IACFA,EAAY,GAGd7I,EAAOA,EACJG,KAAK,SAACvI,EAAGkR,GAAJ,OAAUlR,EAAE8E,MAAQoM,EAAEpM,QAC3B8D,OAAO,SAAAlD,GAAA,OAAuB,IAAfA,EAAKrC,QACT,IAAVgF,IACFD,EAAOA,EAAKG,KAAK,SAACvI,EAAGkR,GAAJ,OAAUA,EAAEpM,MAAQ9E,EAAE8E,SAGlB5D,EAAKwC,QAAQ+B,UAClC,SAAAZ,GAAA,OAAUA,IAAW8C,EAAKX,MAAM9C,cAMlC,IAGIiN,gBAHW/I,EAAK9I,IAAI,SAAAoJ,GAAA,OACtB5E,OAAOC,UAAW2E,KAGGpJ,IAAI,SAAAoG,GAAA,OACzByL,EAAQ3R,KAAKC,MAAMiG,EAAKZ,MAAQ,KAAKS,KAAKG,KAS5C,GAJAyL,EAAUA,EAAQvI,OAAO,SAAAyH,GAAA,OAAwB,IAAhBA,EAAKrR,SAbnB,IAkBjB2L,GACUA,IAAgBsG,EAC1B,CACA,IAAIG,EAAOD,EAAQC,OACfC,EAAMD,EAAKpS,OACf,GAAIQ,KAAKC,MAAM4R,EAAM,GAAK,GAAKA,EAAM,EAAG,CACtC,IAAIC,EAAM9R,KAAKC,MAAM4R,EAAM,GAC3BD,GAAQA,EAAK3M,MAAM,EAAG6M,GAAMF,EAAK3M,MAAM6M,EAAKD,IAC5CF,EAAUC,OACL,GAAI5R,KAAKC,MAAM4R,EAAM,GAAK,EAAG,CAClC,IAAIE,aACJH,EAAK9R,IAAI,SAACoG,EAAM2C,GAAP,OACPkJ,EAASlJ,EAAQ,GAAG9C,KAAKG,KAE3ByL,EAAUI,GAOd,IAAIC,EAAYL,EAAQC,OACpBK,EACQhB,GACAe,EAAU5I,OAAO,SAAAlD,GACf,OACElG,KAAKC,MAAMiG,EAAKZ,MAAQ,MACpBtF,KAAKC,MAAMgR,EAAU3L,MAAQ,MAElC9F,OAAS,EAEpB0S,EAAcP,EAAQ7R,IAAI,SAACqS,EAAMtJ,GAInC,IAAIuJ,EACU1F,GACAxI,EAAQxC,EAAK+B,QAAU4B,GAvDpB,IAwDH8F,EAEVpE,EA1Da,IA2DHoE,GACAA,IAAgBsG,EAK1BY,EAAgB,SAAAnM,GAClB,OACgB,OAAd+K,IACegB,GACDjS,KAAKC,MAAMiG,EAAKZ,MAAQ,MACpBtF,KAAKC,MAAMgR,EAAU3L,MAAQ,KAInD,OAAO6M,EAAKrS,IAAI,SAACoG,EAAM6K,GAAP,OACdjP,EAAAtB,EAAAuB,cAAC+E,GACCnC,KACEyN,GAAcC,EAAcnM,GAA5B,eACmB2C,EADnB,SACiCkI,EADjC,IAEQlI,EAFR,SAEsBkI,EAExBhK,OAAQA,EACRE,IACEmL,GAAcC,EAAcnM,GACxBiC,EAAK1E,KACL,KAEN0F,IAAK9J,IACLiG,MAAOY,EAAKZ,YAMdgN,EAAmBJ,EACpBpS,IAAI,SAAAyS,GAAA,OAAQA,EAAK/S,SACjBgT,OAAO,SAACC,EAAKZ,GAAN,OAAcY,EAAMZ,GAAK,GAC/Ba,EAAgBR,EAAY9I,OAC9B,SAAAmJ,GAAA,OAAwB,IAAhBA,EAAK/S,SACbA,OAEEmT,EAC6B,UAArBrK,EAAUO,IAA2C,UAArBP,EAAUO,IAEtC+J,MACWzK,EAAK1D,MAAMgF,aACP,GAAK6I,EAAmB,KAC7B,GAEV,KAUZO,EAC6B,SAArBvK,EAAUO,IAA0C,SAArBP,EAAUO,IAErCuF,KACWjG,EAAK1D,MAAMiF,aAZhB,SAAAoJ,GAGpB,OAFY,IAGVA,EAAkB,IAAmBA,EAAU,GAAK,GAS1BC,CAAcL,IAClB,GAEV,KAEhB,OACE5Q,EAAAtB,EAAAuB,cAAA,OACE8E,UAAWyB,EAAUO,GACrB2B,MAAOmI,GAAgBE,EACvB1J,IAAK9J,KACLyC,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,cACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,aAAaqL,GAC5BpQ,EAAAtB,EAAAuB,cAAC4L,GACCrB,QACEpI,EAAQxC,EAAK+B,QAAU4B,GACLqH,EAEpB/H,KAAMU,QAUlB,GAAIrB,EACF,OACElC,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,QACb/E,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAC2I,GACCsI,UAAWtL,KAAKiI,qBAChBjL,YAAagD,KAAKF,MAAM9C,YACxB+E,YAAa/B,KAAKjD,MAAMgF,YACxB+B,aAAc9D,KAAKjD,MAAMiF,aACzB1E,QAAS0C,KAAKF,MAAMxC,QACpBQ,UAAWE,EAAMlG,OAAS,EAC1BkC,KAAMA,EACNgE,MAAOgC,KAAKF,MAAM9B,UAO5B,IAAIuN,EAAavR,EAAKuC,MAAM2I,MAAM,SAAAvH,GAAA,OAAqB,IAAXA,IAE5C,OACEvD,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SACXoM,GACAnR,EAAAtB,EAAAuB,cAACuM,GACCqB,qBAAsBjI,KAAKiI,qBAC3BjL,YAAagD,KAAKF,MAAM9C,YACxBhD,KAAMA,EACNsD,QAAS0C,KAAKF,MAAMxC,QACpBQ,UAAWE,EAAMlG,OAAS,IAqB7BkN,GACC5K,EAAAtB,EAAAuB,cAAC8L,GACCpE,YAAa/B,KAAKjD,MAAMgF,YACxBC,aAAchC,KAAKjD,MAAMiF,aACzBhI,KAAMA,IAGVI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,WACZnF,EAAKgC,KACQhC,EAAKoE,OACjBhE,EAAAtB,EAAAuB,cAACkK,GACCvH,YAAagD,KAAKF,MAAM9C,YACxBgI,gBAAiBA,EACjB0C,WAAY1H,KAAK0H,WACjB5J,UAAWE,EAAMlG,OAAS,EAC1BkC,KAAMA,EACNsD,QAAS0C,KAAKF,MAAMxC,WAI1BlD,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SACb/E,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,SAASwK,GACxBvP,EAAAtB,EAAAuB,cAACuF,GACCxB,MAAOA,EACP0C,cAAeA,EACfC,gBAAiBf,KAAKe,gBACtB1E,MAAOrC,EAAKqC,MACZ2E,cAAewI,IAEjBpP,EAAAtB,EAAAuB,cAACsH,GACCgB,YAAa,IACbD,YACE8I,OAAkD,EAA1ClT,KAAK2L,KAAKjE,KAAKjD,MAAMgF,YAAc,KAC3C4E,MAAiD,EAA1CrO,KAAK2L,KAAKjE,KAAKjD,MAAMgF,YAAc,MAE5Cc,cAAe,GACf5F,KAAK,mBACL8E,YAAa/B,KAAKjD,MAAMgF,YACxB+B,aAAc9D,KAAKjD,MAAMiF,aACzBhI,KAAMA,KAGVI,EAAAtB,EAAAuB,cAAA,OAAK8E,UAAU,uRCxiBFsM,eACnB,SAAAC,EAAY5L,gGAAO6L,CAAA3L,KAAA0L,GAAA,IAAAzL,mKAAA2L,CAAA5L,MAAA0L,EAAAvL,WAAAvD,OAAAwD,eAAAsL,IAAArL,KAAAL,KACXF,IADW,OAEjBG,EAAKlD,OACHE,KAAM,UAERgD,EAAK4L,WAAa5L,EAAK4L,WAAWxI,KAAhBpD,GALDA,qUADc7F,EAAAtB,EAAMyH,iDAQ5BuL,GACT9L,KAAKW,UAAU1D,KAAM6O,EAAEC,OAAOnO,yCAGvB,IAAA6C,EAAAT,KACP,OACE5F,EAAAtB,EAAAuB,cAAA,6BAEED,EAAAtB,EAAAuB,cAAA,SACE2R,SAAUhM,KAAK6L,WACfnP,KAAK,OACLkB,MAAOoC,KAAKjD,MAAME,OAEpB7C,EAAAtB,EAAAuB,cAAC4R,EAAA,GACCtM,QAAS,kBAAMc,EAAKX,MAAM2L,MAAMhL,EAAK1D,MAAME,OAC3CiP,GAAG,UAFL,SAKA9R,EAAAtB,EAAAuB,cAAA,WACAD,EAAAtB,EAAAuB,cAAC4R,EAAA,GAAKtM,QAAS,kBAAMc,EAAKX,MAAM2L,MAAM,MAAMS,GAAG,UAA/C,YAGA9R,EAAAtB,EAAAuB,cAAA,WACAD,EAAAtB,EAAAuB,cAAC4R,EAAA,GAAKtM,QAAS,kBAAMc,EAAKX,MAAM2L,MAAM,MAAMS,GAAG,UAA/C,YAGA9R,EAAAtB,EAAAuB,cAAA,WACAD,EAAAtB,EAAAuB,cAAC4R,EAAA,GAAKtM,QAAS,kBAAMc,EAAKX,MAAM2L,MAAM,MAAMS,GAAG,UAA/C,gRCrCaC,eACnB,SAAAC,EAAYtM,GAAO,mGAAAuM,CAAArM,KAAAoM,oKAAAE,CAAAtM,MAAAoM,EAAAjM,WAAAvD,OAAAwD,eAAAgM,IAAA/L,KAAAL,KACXF,uUAF+B1F,EAAAtB,EAAMyH,gDAK3C,OAAOnG,EAAAtB,EAAAuB,cAAA,+SCJUkS,eACnB,SAAAC,EAAY1M,gGAAO2M,CAAAzM,KAAAwM,GAAA,IAAAvM,mKAAAyM,CAAA1M,MAAAwM,EAAArM,WAAAvD,OAAAwD,eAAAoM,IAAAnM,KAAAL,KACXF,IADW,OAEjBG,EAAK0M,cAAgB1M,EAAK0M,cAActJ,KAAnBpD,GAFJA,qUADc7F,EAAAtB,EAAMyH,uDAMvBP,KAAKF,MAAM8M,MAAMC,OAAO9S,oCAQtC,IAAIuD,EAAU0C,KAAKF,MAAM8M,MAAMC,OAAO9S,GACtC,OACEK,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAACiN,GACCqF,cAAe3M,KAAK2M,cACpB3P,YAAagD,KAAKF,MAAM9C,YACxBM,QAASA,EACTU,MAAOgC,KAAKF,MAAM3C,OAAOG,yTChBdwP,eACnB,SAAAC,EAAYjN,GAAO,mGAAAkN,CAAAhN,KAAA+M,oKAAAE,CAAAjN,MAAA+M,EAAA5M,WAAAvD,OAAAwD,eAAA2M,IAAA1M,KAAAL,KACXF,uUAF0B1F,EAAAtB,EAAMyH,gDAKtC,OACEnG,EAAAtB,EAAAuB,cAAA,cACED,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAC4R,EAAA,GAAKC,GAAG,KACP9R,EAAAtB,EAAAuB,cAAA,OAAK6S,IAAKC,GAAArU,IACVsB,EAAAtB,EAAAuB,cAAA,+BAGJD,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAA,OAAK6S,IAAKE,GAAAtU,IACVsB,EAAAtB,EAAAuB,cAAA,WAAM2F,KAAKF,MAAMgK,MAAQ,0RCbduD,eACnB,SAAAC,EAAYxN,gGAAOyN,CAAAvN,KAAAsN,GAAA,IAAArN,mKAAAuN,CAAAxN,MAAAsN,EAAAnN,WAAAvD,OAAAwD,eAAAkN,IAAAjN,KAAAL,KACXF,IADW,OAEjBG,EAAKwN,iBAAmBxN,EAAKwN,iBAAiBpK,KAAtBpD,GACxBA,EAAKyN,YAAczN,EAAKyN,YAAYrK,KAAjBpD,GAHFA,qUADkB7F,EAAAtB,EAAMyH,2DAMvB,IAAAE,EAAAT,KAClBwF,QAAQC,IAAI,sBAAuBzF,KAAKF,MAAM3C,QAE9CuD,WAAW,WACJD,EAAKX,MAAM3C,QACdsD,EAAKiN,eAEN,4CAGS,IACPvQ,EAAU6C,KAAKF,MAAf3C,OACDwQ,EAAaxQ,EAASA,EAAOrF,OAAS,EAC1CuF,EAAmB,gBACjBC,QAASqQ,EACT3Q,YAAagD,KAAKF,MAAM9C,uDAGXjD,GACf,IAAIoD,EAAS6C,KAAKF,MAAM3C,OACnBA,GACLE,EAAmB,uBACjBW,MAAOb,EAAOpD,GACdiD,YAAagD,KAAKF,MAAM9C,YACxBjD,GAAIA,qCAGC,IAAAuL,EAAAtF,KACF7C,EAAU6C,KAAKF,MAAf3C,OACL,IAAKA,EACH,OAAO/C,EAAAtB,EAAAuB,cAAA,oCAET,IAAIuT,EAAazQ,EAAO/E,IAAI,SAAC4F,EAAOmD,GAClC,OACE/G,EAAAtB,EAAAuB,cAAC4R,EAAA,GACCxK,IAAK9J,IACLgI,QAAS,kBAAM2F,EAAKmI,iBAAiBtM,IACrC+K,GAAA,UAAc/K,GAHhB,KAIeA,EAJf,QAQA0M,EAAY1Q,EAAOrF,OAEvB,OADA0N,QAAQC,IAAI,YAAaoI,GAEvBzT,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAC4R,EAAA,GAAKtM,QAASK,KAAK0N,YAAaxB,GAAA,UAAc2B,GAA/C,gBAGCD,sQCrDYE,eACnB,SAAAC,EAAYjO,GAAO,mGAAAkO,CAAAhO,KAAA+N,oKAAAE,CAAAjO,MAAA+N,EAAA5N,WAAAvD,OAAAwD,eAAA2N,IAAA1N,KAAAL,KACXF,uUAFyB1F,EAAAtB,EAAMyH,gDAKrC,OACEnG,EAAAtB,EAAAuB,cAAA,sCAEED,EAAAtB,EAAAuB,cAACgT,IAAUrQ,YAAagD,KAAKF,MAAM9C,YAAaG,OAAQ6C,KAAKF,MAAM3C,6QCjBtD+Q,eACnB,SAAAC,EAAYrO,GAAO,mGAAAsO,CAAApO,KAAAmO,oKAAAE,CAAArO,MAAAmO,EAAAhO,WAAAvD,OAAAwD,eAAA+N,IAAA9N,KAAAL,KACXF,uUAF2B1F,EAAAtB,EAAMyH,gDAKvC,OAAOnG,EAAAtB,EAAAuB,cAAA,mdCWLiU,eACJ,SAAAC,EAAYzO,gGAAO0O,CAAAxO,KAAAuO,GAAA,IAAAtO,mKAAAwO,CAAAzO,MAAAuO,EAAApO,WAAAvD,OAAAwD,eAAAmO,IAAAlO,KAAAL,KACXF,IADW,OAEjBG,EAAKlD,MAAQJ,EAAM+R,WACnBzO,EAAK0O,YAAc1O,EAAK0O,YAAYtL,KAAjBpD,GACnBA,EAAK2O,OAAS3O,EAAK2O,OAAOvL,KAAZpD,GACdA,EAAK4O,YAAc5O,EAAK4O,YAAYxL,KAAjBpD,GALFA,qUADH7F,EAAAtB,EAAMyH,gDASpBP,KAAKW,SAAShE,EAAM+R,0DAGpB1O,KAAK8O,0DAGL9O,KAAK8O,YAAcnS,EAAMoS,UAAU/O,KAAK4O,OAAOvL,KAAKrD,OACpDA,KAAK6O,kDAGK5R,GACVR,EAAS,gBAAiBQ,KAAMA,0CAGhCR,EAAS,gBAAiBS,QAAQ,qCAE3B,IAAAuD,EAAAT,KACP,OAAKA,KAAKjD,MAAMG,OAId9C,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAC2U,GAAA,EAAD,KACE5U,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAACyS,IAAOhD,KAAM9J,KAAKjD,MAAMC,eACvBgD,KAAKjD,MAAMC,aACX5C,EAAAtB,EAAAuB,cAAC4U,GAAA,GACCxV,KAAK,IACLyV,OAAQ,SAAApP,GAAA,OACN1F,EAAAtB,EAAAuB,cAACoR,IAAMA,MAAOhL,EAAKkO,iBAIxB3O,KAAKjD,MAAMC,aACV5C,EAAAtB,EAAAuB,cAAA,WACED,EAAAtB,EAAAuB,cAAC4U,GAAA,GACCxV,KAAK,aACLyV,OAAQ,SAAApP,GAAA,OACN1F,EAAAtB,EAAAuB,cAACkS,GAAD4C,IACEnS,YAAayD,EAAK1D,MAAMC,YACxBG,OAAQsD,EAAK1D,MAAMI,QACf2C,OAIV1F,EAAAtB,EAAAuB,cAAC4U,GAAA,GACCG,OAAA,EACA3V,KAAK,SACLyV,OAAQ,kBACN9U,EAAAtB,EAAAuB,cAACyT,IACC9Q,YAAayD,EAAK1D,MAAMC,YACxBG,OAAQsD,EAAK1D,MAAMI,YAIzB/C,EAAAtB,EAAAuB,cAAC4U,GAAA,GACCG,OAAA,EACA3V,KAAK,eACLyV,OAAQ,kBAAM9U,EAAAtB,EAAAuB,cAAC8R,GAAD,aAxCnB/R,EAAAtB,EAAAuB,cAAC6T,GAAD,eAmDbmB,EAAAvW,EAASoW,OAAO9U,EAAAtB,EAAAuB,cAACiU,GAAD,MAASgB,SAASC,eAAe","file":"main.0dd4.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"c0d3da8d159baa9ecdc0413d36fd5888.svg\";","export const getKeywordFromURL = () => {\n  let urlLocation = window.location.search,\n    index = urlLocation.search(/=/g);\n  if (!urlLocation) return \"\";\n  return urlLocation.slice(index + 1, urlLocation.length);\n};\n\nexport const getKeywordObjFromURL = () => {\n  let keyword = getKeywordFromURL();\n  let urlLocation = window.location.search,\n    index = urlLocation.search(/=/g);\n  return {\n    key: urlLocation.slice(1, index),\n    value: getKeywordFromURL()\n  };\n};\n\nexport const getRandomKey = (n = 8) => {\n  let letter = \"abcdefghijklmnopqrstuvxyzABCDEFGHIJKLMNOPQRSTUVXYZ\";\n  return Array.from({length: n})\n    .fill(0)\n    .map(w => letter[Math.floor(Math.random() * (letter.length - 1))])\n    .join(\"\");\n};\n\nexport const getObj = (key, value) => {\n  let newObj = {};\n  newObj[key] = value;\n  return Object.assign({}, newObj);\n};\n\nexport const getRandomInt = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n","import firebase from \"firebase\";\nimport {config} from \"./config.js\";\n\nlet firebaseApp = firebase.initializeApp(config);\n\nexport const app = {\n  db: firebaseApp.database(),\n  auth: firebaseApp.auth(),\n  getNodeByPath: (path, action) => {\n    return firebaseApp\n      .database()\n      .ref(path)\n      .on(\"value\", action);\n  },\n  setNodeByPath: (path, data) => {\n    return firebaseApp\n      .database()\n      .ref(path)\n      .set(data);\n  },\n  updateTableDataByID: (id, data) => {\n    firebaseApp\n      .database()\n      .ref(`tables/${id}/`)\n      .set(data);\n  },\n  updateTableGameDataByPath: (path, game) => {\n    firebaseApp\n      .database()\n      .ref(\"tables/\" + path)\n      .set(game);\n  }\n};\n","export const config = {\n  apiKey: \"AIzaSyDsmWxFexrd890dUvpA313qvxvcjDRp1Ok\",\n  authDomain: \"wowbridge88.firebaseapp.com\",\n  databaseURL: \"https://wowbridge88.firebaseio.com\",\n  projectId: \"wowbridge88\",\n  storageBucket: \"wowbridge88.appspot.com\",\n  messagingSenderId: \"862342003288\"\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nlet redColor = \"#FF525D\";\nlet blackColor = \"#222222\";\n\nexport const Heart = ({scale}) => {\n  return (\n    <SvgContainer scale={scale} ratio={0.89} fill={redColor}>\n      <path d=\"M70.9643211,0 C59.2565148,0 53.056072,5.64335169 49.9709368,10.1546618 C46.889795,5.64335169 40.6986702,0 29.0152682,0 C15.0405332,0 0,9.29808951 0,29.7129874 C0,37.7588224 1.74734105,44.1438566 5.84192287,51.0638602 C9.82779506,57.7993304 18.2685439,66.1002296 30.9298889,75.7372219 C35.8715185,79.4984213 40.4235682,82.6625486 43.3724836,84.6547112 C49.0391399,88.4833363 49.2609963,88.5228158 49.9456452,88.5232594 C49.9802548,88.5241466 50.0135332,88.5245902 50.0468117,88.5245902 C50.6941887,88.5245902 51.1401201,88.3183208 56.5574098,84.6764471 C59.5081,82.6922691 64.0641431,79.5401188 69.0102098,75.7873476 C81.6870849,66.1698733 90.1513504,57.851674 94.1682825,51.0643038 C98.2557649,44.1571643 100,37.7712429 100,29.713431 C100,9.29808951 84.9488177,0 70.9643211,0 Z\" />\n    </SvgContainer>\n  );\n};\n\nexport const Spade = ({scale}) => {\n  return (\n    <SvgContainer scale={scale} ratio={1} fill={redColor}>\n      <path\n        d=\"M88.5085925,35.4545714 C84.7618726,29.0791639 76.8279859,21.2225289 64.9275728,12.1017285 C60.2811897,8.54098888 56.0030971,5.54662558 53.2315338,3.66150342 C47.8489868,0 47.6921609,0 47.0310732,0 C46.3716539,0 46.2152451,0 40.8347835,3.64219036 C38.0615518,5.52017509 33.7788713,8.50362231 29.1295686,12.0555451 C17.2145573,21.1574523 9.25814768,29.0300415 5.48264861,35.4541516 C1.63958096,41.9928804 0,48.0361874 0,55.6623252 C0,74.9846174 14.1481113,83.785073 27.2935382,83.785073 C33.059808,83.785073 37.4025496,82.3177007 40.6500126,80.3074635 L37.0551136,94 L56.8014075,94 L53.1693874,80.1668141 C56.4343682,82.2488454 60.8367536,83.785073 66.7252308,83.785073 C79.8614817,83.785073 94,74.9846174 94,55.6623252 C94,48.0475233 92.3579165,42.0042164 88.5085925,35.4545714 Z\"\n        fill={blackColor}\n      />\n    </SvgContainer>\n  );\n};\n\nexport const Diamond = ({scale}) => {\n  let w = 93,\n    h = 100;\n  return (\n    <SvgContainer scale={scale} ratio={1} fill={redColor}>\n      <polygon\n        points={`${w / 2} 0 0 ${h / 2} ${w / 2} ${h} ${w} ${h / 2}`}\n      />\n    </SvgContainer>\n  );\n};\n\nexport const Club = ({scale}) => {\n  return (\n    <SvgContainer scale={scale} ratio={0.98} fill={blackColor}>\n      <path\n        d=\"M70.3555185,31.9345189 C71.174537,29.4903991 71.587963,26.9404062 71.587963,24.3163882 C71.587963,10.9083748 60.5577593,0 47,0 C33.4422407,0 22.412037,10.9083748 22.412037,24.3163882 C22.412037,26.9404062 22.825463,29.4903991 23.6444815,31.9345189 C10.5223426,32.426872 0,43.137703 0,56.2332616 C0,69.641275 11.0302037,80.5496498 24.587963,80.5496498 C30.872037,80.5496498 36.6116944,78.2040867 40.9631111,74.3539201 L35.6686481,92.1010101 L58.1820833,92.1010101 L52.8323519,74.1692877 C57.2077037,78.12834 63.0287407,80.5496498 69.412037,80.5496498 C82.9697963,80.5496498 94,69.641275 94,56.2332616 C94,43.137703 83.4776574,32.426872 70.3555185,31.9345189 Z\"\n        fill={blackColor}\n      />\n    </SvgContainer>\n  );\n};\n\nconst SvgContainer = ({children, ratio, scale, fill}) => {\n  let width = scale * 100,\n    height = Math.floor(width * ratio);\n  return (\n    <div>\n      <svg\n        width={`${width}px`}\n        height={`${height}px`}\n        viewBox={`0 0 ${width} ${height}`}>\n        <g fill={fill} transform={`scale(${scale})`}>\n          {children}\n        </g>\n      </svg>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {Heart, Spade, Diamond, Club} from \"./shape/shape.js\";\nexport const CARD_NUM = {\n  TOTAL: 52,\n  SUITS: 4,\n  HAND: 13\n};\n\nexport const EMPTY_SEAT = -1;\nexport const NO_TRUMP = 4;\nexport const BID_NUM = [1, 2, 3, 4, 5, 6, 7];\n\nexport const SUIT_SHAPE = {\n  0: scale => <Club scale={scale} />,\n  1: scale => <Diamond scale={scale} />,\n  2: scale => <Heart scale={scale} />,\n  3: scale => <Spade scale={scale} />,\n  4: scale => <div>NT</div>\n};\n\nexport const CARD_RANK = [2, 3, 4, 5, 6, 7, 8, 9, 10, \"J\", \"Q\", \"K\", \"A\"];\n\nexport const DEFAULT_GAME = {\n  deal: 0,\n  bid: {\n    isDb: false,\n    isRdb: false,\n    trick: 0,\n    trump: -1\n  },\n  order: -1,\n  isGameOver: false,\n  ready: [false, false, false, false],\n  players: [EMPTY_SEAT, EMPTY_SEAT, EMPTY_SEAT, EMPTY_SEAT]\n};\n","import {createStore, applyMiddleware} from \"redux\";\nimport thunk from \"redux-thunk\";\nimport {app} from \"../firebase/firebase.js\";\nimport {getObj} from \"../helper/helper.js\";\nimport {EMPTY_SEAT, DEFAULT_GAME} from \"../components/constant.js\";\n\nexport const dispatch = (type, action) =>\n  store.dispatch(Object.assign({}, {type: type}, action));\n\nexport const appReducer = (state, action) => {\n  switch (action.type) {\n    case \"HANDLE_LOGIN\": {\n      return Object.assign({}, state, {currentUser: action.name});\n    }\n    case \"STOP_LOADING\": {\n      return Object.assign({}, state, {isLoad: action.isLoad});\n    }\n    case \"FETCH_TABLE_DATA\": {\n      // tables is an array, query table by index\n      return Object.assign({}, state, {tables: action.tables});\n    }\n    default:\n      return state;\n  }\n};\n\nexport const store = createStore(\n  appReducer,\n  {\n    currentUser: null,\n    isLoad: false\n  },\n  applyMiddleware(thunk),\n);\n\nexport const dispatchToDatabase = (type, action) => {\n  switch (type) {\n    case \"CREATE_TABLE\": {\n      if (action.tableId > 0) {\n        let players = DEFAULT_GAME.players.slice(0);\n        players[0] = action.currentUser;\n        let newTable = [\n          Object.assign({}, DEFAULT_GAME, {\n            players: players\n          })\n        ];\n        app.updateTableDataByID(action.tableId, newTable);\n      } else {\n        // first table is create by system\n        app.updateTableDataByID(action.tableId, [DEFAULT_GAME]);\n      }\n      break;\n    }\n    case \"CREATE_NEW_GAME\": {\n      let game = Object.assign({}, DEFAULT_GAME, {\n        players: action.players\n      });\n      let path = `tables/${action.tableId}/${action.gameId}`;\n      app.setNodeByPath(path, game);\n    }\n    case \"READY_A_PLAYER\": {\n      // if all four player are ready,\n      // start a new game automatically;\n      let game = action.game;\n      let ready = game.ready;\n      let readyCopy = [\n        ...ready.slice(0, action.player),\n        action.value,\n        ...ready.slice(action.player + 1, ready.length)\n      ];\n      let path = `tables/${action.tableId}/${action.gameIndex}/ready/`;\n      app.setNodeByPath(path, readyCopy);\n      break;\n    }\n    case \"ADD_NEW_DECK_TO_TABLE\": {\n      // todo, use high order function to wrap this\n      // create a game\n      let currentTable = action.table.map(game =>\n        Object.assign({}, game),\n      );\n\n      let currentGame = currentTable.pop();\n      let newGame = Object.assign({}, currentGame, {\n        cards: action.cards\n      });\n\n      currentTable.push(newGame);\n      // let table = getObj(action.id, currentTable);\n      app.updateTableDataByID(action.id, currentTable);\n      break;\n    }\n    case \"UPDATE_WINNER_CARD\": {\n      // todo, use high order function to wrap this\n      let currentTable = action.table.map(game =>\n        Object.assign({}, game),\n      );\n\n      let currentGame = currentTable.pop();\n      let cards = currentGame.cards;\n      currentGame.order = action.order;\n\n      // update which player will draw first\n      let targetCardIndex = cards.findIndex(\n        card => card.value === action.winnerCard.value,\n      );\n      let winner = action.winnerCard;\n      winner.isWin = true;\n      currentGame.deal = winner.player;\n      cards[targetCardIndex] = winner;\n      // 51 means the index in the card array , the n-52 cards is given\n      if (action.order === 51) {\n        currentGame.isGameOver = true;\n      }\n      currentTable.push(currentGame);\n      // let table = getObj(action.id, currentTable);\n      app.updateTableDataByID(action.id, currentTable);\n      break;\n    }\n    case \"UPDATE_CURRENT_TRICK\": {\n      // update this is how many trick players have been draw\n\n      let currentTable = action.table.map(game =>\n        Object.assign({}, game),\n      );\n\n      let gameIndex = currentTable.length - 1;\n      let currentGame = currentTable.pop();\n      let order = action.order;\n      app.updateTableGameDataByPath(\n        `${action.id}/${gameIndex}/order/`,\n        order,\n      );\n\n      let cards = currentGame.cards;\n\n      let targetCardInex = cards.findIndex(\n        card => card.value === action.value,\n      );\n\n      let currentCard = cards[targetCardInex];\n      currentCard.order = order;\n\n      // update deal order, who can draw card next\n      app.updateTableGameDataByPath(\n        `${action.id}/${gameIndex}/deal`,\n        action.deal,\n      );\n\n      // this card has been draw in nth trick\n      // set current trick number to this card\n      if (currentCard.trick === 0) {\n        // save card data to database\n\n        // update trick to current nth trick, e.g. players have play 4 tricks\n        // so far, the maxTrick will be 5\n        currentCard.trick = action.maxTrick;\n        // record who has this card\n        currentCard.player = (action.deal + 4 - 1) % 4;\n\n        app.updateTableGameDataByPath(\n          `${action.id}/${gameIndex}/cards/${targetCardInex}/`,\n          currentCard,\n        );\n      }\n      break;\n    }\n    case \"ADD_PLAYER_TO_TABLE\": {\n      let currentTable = action.table.map(game =>\n        Object.assign({}, game),\n      );\n\n      let currentGame = currentTable.pop();\n\n      let emptySeatIndex = currentGame.players.findIndex(\n        seat => seat === EMPTY_SEAT,\n      );\n      if (emptySeatIndex >= 0) {\n        currentGame.players[emptySeatIndex] = action.currentUser;\n        currentTable.push(currentGame);\n\n        // let currentTableObj = getObj(action.id, currentTable);\n        app.updateTableDataByID(action.id, currentTable);\n      }\n      break;\n    }\n    case \"UPDATE_AUCTION\": {\n      app.updateTableGameDataByPath(\n        `${action.id}/${action.gameIndex}/`,\n        action.game,\n      );\n      break;\n    }\n    default:\n      return null;\n  }\n};\n\napp.getNodeByPath(\"tables\", value => {\n  return dispatch(\"FETCH_TABLE_DATA\", {tables: value.val()});\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {Heart, Spade, Diamond, Club} from \"./shape/shape.js\";\nimport {CARD_NUM, CARD_RANK, SUIT_SHAPE} from \"./constant.js\";\nimport \"../style/reset.scss\";\nimport \"../style/card.scss\";\n\nexport const TrickCard = ({value}) => {\n  return (\n    <div className=\"abbbbbbbbbbbbb\">\n      <Card flipUp={true} value={value} />\n    </div>\n  );\n};\n\nexport const Card = ({value, evt = null, flipUp, name = null}) => {\n  let kind = Math.floor(value / CARD_NUM.HAND);\n  let wrapperName = name ? `card-wrapper ${name}` : \"card-wrapper\";\n  if (flipUp) {\n    return (\n      <div\n        className={wrapperName}\n        onClick={() => {\n          if (evt) {\n            evt(value);\n          }\n        }}>\n        <div className=\"card flip-up\">\n          <div className=\"card-inner\">\n            <div\n              className={\n                kind === 1 || kind === 2\n                  ? \"red value\"\n                  : \"black value\"\n              }>\n              {CARD_RANK[value % CARD_NUM.HAND]}\n            </div>\n            {SUIT_SHAPE[kind](0.24)}\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <div className={wrapperName}>\n        <div className=\"card flip-down\">\n          <div className=\"card-inner\" />\n        </div>\n      </div>\n    );\n  }\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {getRandomKey} from \"../helper/helper.js\";\nimport {Card, TrickCard} from \"./card.js\";\nimport \"../style/game.scss\";\n\nexport default class Trick extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fadeOutCards: false\n    };\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.order !== prevProps.order) {\n      if (this.props.order % 4 === 3) {\n        setTimeout(() => this.setState({fadeOutCards: true}), 2000);\n      } else {\n        this.setState({fadeOutCards: false});\n      }\n    }\n  }\n  render() {\n    let direction = [\"south-card\", \"west-card\", \"north-card\", \"east-card\"];\n    let {\n      order,\n      cards,\n      cardsByPlayer,\n      isTrickFinish,\n      currentMaxTrick\n    } = this.props;\n    if (!cards) {\n      return null;\n    }\n\n    let currentTrick = null,\n      maxTrick = currentMaxTrick();\n\n    // cause maxTrick will increase if there are already four cards\n    if (maxTrick === 0) {\n      maxTrick = 1;\n    }\n\n    // show cards sequence by player order\n    if (cardsByPlayer && !this.state.fadeOutCards) {\n      // sorting tricks by player index, and filter cards by max trick\n      currentTrick = cardsByPlayer.map((hand, index) => {\n        hand = hand.sort((cardA, cardB) => cardA.value - cardB.value);\n        let trickCards = hand.map(userHand => {\n          if (userHand.trick === maxTrick) {\n            return (\n              <TrickCard\n                key={getRandomKey()}\n                value={userHand.value}\n              />\n            );\n          }\n        });\n\n        let hasTrickCards =\n                    trickCards.filter(\n                      card => card !== null && card !== undefined,\n                    ).length > 0;\n        if (hasTrickCards) {\n          return (\n            <div\n              className={`trick-card-wrapper ${direction[index]}`}\n              key={`trick-card-${index}`}>\n              {trickCards}\n            </div>\n          );\n        } else {\n          return null;\n        }\n      });\n    }\n\n    if (currentTrick) {\n      currentTrick = currentTrick.filter(\n        card => card !== null && card !== undefined,\n      );\n    }\n\n    return (\n      <div className={\"trick-area\"}>\n        <div className=\"trick-area-inner\">{currentTrick}</div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport \"../style/trickscore.scss\";\n\nexport default class TrickScore extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    let {game, windowWidth, windowHeight} = this.props;\n    if (!game || !game.cards) {\n      return null;\n    }\n    let scoreTeamOne = 0,\n      scoreTeamTwo = 0;\n\n    // which team players belong: [ one, two, one ,two]\n    game.cards.map((card, index) => {\n      let winningScore = card.isWin ? 1 : 0;\n      if ((index % 4) % 2 === 0) {\n        scoreTeamOne += winningScore;\n      } else {\n        scoreTeamTwo += winningScore;\n      }\n    });\n    let [player1, player2, player3, player4] = game.players;\n    let innerStyle = this.props.innerStyle;\n    let resizeRatio = this.props.ratio || 0.15;\n    let thumbnailStyle = {\n      width: this.props.thumbnailSize,\n      height: this.props.thumbnailSize\n    };\n\n    return (\n      <div\n        className={\n          this.props.name\n            ? `trick-score ${this.props.name}`\n            : \"trick-score\"\n        }\n        style={innerStyle}>\n        <div\n          className=\"trick-score-inner\"\n          style={{\n            width: windowWidth * resizeRatio\n          }}>\n            <div className=\"group-wrapper\">\n              <div className=\"group\">\n                <div\n                  className=\"thumbnail-group\"\n                  style={{minWidth: this.props.thumbnailSize * 2}}>\n                  <div className=\"thumbnail\" style={thumbnailStyle}>\n                    <span>{player1[0]}</span>\n                  </div>\n                  <div className=\"thumbnail\" style={thumbnailStyle}>\n                    <span>{player3[0]}</span>\n                  </div>\n                </div>\n                <div className=\"score\">{scoreTeamOne}</div>\n              </div>\n              <div className=\"group\">\n                <div\n                  className=\"thumbnail-group\"\n                  style={{minWidth: this.props.thumbnailSize * 2}}>\n                  <div className=\"thumbnail\" style={thumbnailStyle}>\n                    <span>{player2[0]}</span>\n                  </div>\n                  <div className=\"thumbnail\" style={thumbnailStyle}>\n                    <span>{player4[0]}</span>\n                  </div>\n                </div>\n                <div className=\"score\">{scoreTeamTwo}</div>\n              </div>\n            </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport TrickScore from \"./trickScore.js\";\nimport {dispatchToDatabase} from \"../reducer/reducer.js\";\nimport \"../style/btn.scss\";\n\nexport default class ScoreBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.recordGame = this.recordGame.bind(this);\n  }\n  recordGame() {\n    let {game, table} = this.props;\n    if (game.order !== 51 || !table) {\n      return;\n    }\n    dispatchToDatabase(\"CREATE_NEW_GAME\", {\n      tableId: this.props.tableId,\n      gameId: this.props.table.length,\n      players: this.props.game.players\n    });\n  }\n  render() {\n    let {game, windowWidth, windowHeight, currentUser} = this.props;\n    if (!game || !game.cards) {\n      return null;\n    }\n    let scoreTeamOne = 0,\n      scoreTeamTwo = 0;\n\n    // which team players belong: [ one, two, one ,two]\n    game.cards.map((card, index) => {\n      let winningScore = card.isWin ? 1 : 0;\n      if ((index % 4) % 2 === 0) {\n        scoreTeamOne += winningScore;\n      } else {\n        scoreTeamTwo += winningScore;\n      }\n    });\n\n    let result = {\n      win: \", 94 \",\n      lose: \"\"\n    };\n    let resultWords = null;\n    let playerIndex = game.players.indexOf(currentUser);\n\n    let {declarer, trick} = game.bid;\n    let targetTrick = 6 + trick;\n    let isDeclarerInTeamOne = declarer % 2 === 0;\n\n    // if user is curretn user\n    if (playerIndex >= 0) {\n      // if user is declearer\n      if (isDeclarerInTeamOne) {\n        if (playerIndex % 2 === 0 && scoreTeamOne >= targetTrick) {\n          resultWords = result.win;\n        } else {\n          resultWords = result.lose;\n        }\n      } else {\n        if (playerIndex % 2 !== 0 && scoreTeamTwo >= targetTrick) {\n          resultWords = result.win;\n        } else {\n          resultWords = result.lose;\n        }\n      }\n    }\n\n    return (\n      <div className=\"game-over-board\">\n        <TrickScore\n          currentUser={this.props.currentUser}\n          ratio={0.5}\n          thumbnailSize={46}\n          windowWidth={this.props.windowWidth}\n          widnowHeight={this.props.windowHeight}\n          game={this.props.game}>\n          <div>\n            <div className=\"result\">\n              <div className=\"words\">{resultWords}</div>\n            </div>\n            <div>\n              <button onClick={this.recordGame} className=\"btn\">\n                                Start a new Game\n              </button>\n            </div>\n          </div>\n        </TrickScore>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport {SUIT_SHAPE} from \"./constant.js\";\nimport {getRandomKey} from \"../helper/helper.js\";\n\nexport const AuctionList = ({result, scale}) => {\n  if (!result) {\n    return null;\n  }\n  let resultsNum = result.length;\n\n  return (\n    <div className=\"record\">\n      {Array.from({length: Math.ceil(resultsNum / 4)})\n        .fill(0)\n        .map((res, index) => (\n          <div key={getRandomKey()} className=\"row\">\n            {Array.from({length: 4})\n              .fill(0)\n              .map((re, j) => {\n                let resultItem = result[index * 4 + j];\n                if (resultItem && resultItem.opt) {\n                  return (\n                    <div\n                      key={getRandomKey()}\n                      className=\"bid-result\">\n                      {resultItem.opt}\n                    </div>\n                  );\n                } else if (\n                  resultItem &&\n                                    resultItem.trick >= 0\n                ) {\n                  return (\n                    <div\n                      key={getRandomKey()}\n                      className=\"bid-result\">\n                      <div>{resultItem.trick + 1}</div>\n                      {SUIT_SHAPE[resultItem.trump](\n                        scale,\n                      )}\n                    </div>\n                  );\n                } else {\n                  return (\n                    <div\n                      key={getRandomKey()}\n                      className=\"bid-result\">\n                      {null}\n                    </div>\n                  );\n                }\n              })}\n          </div>\n        ))}\n    </div>\n  );\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {SUIT_SHAPE, BID_NUM} from \"./constant.js\";\nimport {getRandomKey} from \"../helper/helper.js\";\nimport {dispatchToDatabase} from \"../reducer/reducer.js\";\nimport {AuctionList} from \"./auctionList.js\";\nimport \"../style/auction.scss\";\n\nexport default class Auction extends React.Component {\n  constructor(props) {\n    super(props);\n    let game = this.props.game;\n    this.state = {\n      currentTrick: game.bid.trick,\n      visibility: false,\n      current: null\n    };\n    this.updateBid = this.updateBid.bind(this);\n    this.validateUserTurnAndsetTrump = this.validateUserTurnAndsetTrump.bind(\n      this,\n    );\n  }\n  validateUserTurnAndsetTrump(index) {\n    // check if already current user's turn to give his bid\n    if (!this.props.currentUser || !this.props.game) return;\n    let game = this.props.game;\n\n    if (game.players && this.props.currentUser) {\n      // if currentUser's Index is same as game deal, let him give bid\n\n      let currentUserIndex = game.players.findIndex(\n        player => player === this.props.currentUser,\n      );\n      if (currentUserIndex === game.deal) {\n        this.setState({\n          currentTrick: index,\n          current: index,\n          visibility: true\n        });\n      }\n    }\n  }\n  updateBid(trump, opt = null) {\n    let newBid,\n      isFinishAuction = false,\n      declarer = this.props.game.bid.declarer;\n\n    if (trump >= 0 && trump !== null) {\n      let bid = {\n        trick: this.state.currentTrick,\n        trump: trump\n      };\n      // udpate result\n      let result = this.props.game.bid.result || [];\n      result.push(Object.assign({}, bid));\n\n      // update bid taker, when give a trump bid,\n      // record who is the last bid giver;\n      declarer = this.props.game.deal;\n\n      newBid = Object.assign(\n        {},\n        this.props.game.bid,\n        bid,\n        {declarer: declarer},\n        {result: result},\n      );\n    } else {\n      let result = this.props.game.bid.result || [];\n      result.push({opt: opt});\n\n      // is game start\n\n      if (result.length >= 4) {\n        let isAllPass = result\n          .slice(result.length - 3, result.length)\n          .every(res => res.opt === \"Pass\");\n        let isGreaterThanFour = result.length >= 4;\n        let hasValidTrump = result.some(bid => bid.trick >= 0);\n\n        isFinishAuction =\n                    isAllPass && isGreaterThanFour && hasValidTrump;\n      }\n\n      // update bid\n      newBid = Object.assign({}, this.props.game.bid, {\n        result: result\n      });\n    }\n\n    let deal = this.props.game.deal;\n    if (isFinishAuction) {\n      deal = (declarer + 1) % 4;\n    } else {\n      deal = (deal + 1) % 4;\n    }\n\n    let newGame = Object.assign(\n      {},\n      this.props.game,\n      {bid: newBid},\n      {deal: deal},\n    );\n\n    dispatchToDatabase(\"UPDATE_AUCTION\", {\n      id: this.props.tableId,\n      gameIndex: this.props.gameIndex,\n      game: newGame\n    });\n\n    this.setState({visibility: false, current: null});\n  }\n  render() {\n    let {game, tableId, gameIndex} = this.props;\n\n    let players = game.players;\n    let isCurrentUser =\n            players && players[game.deal] === this.props.currentUser;\n    console.log(\"isCurrentUser\", isCurrentUser);\n\n    let value = game.bid.trick * 5 + game.bid.trump;\n\n    // todo: refactor\n    let trickOpt, trumpOpt;\n    if (value < 0) {\n      trickOpt = Array.from({length: 7})\n        .fill(0)\n        .map((opt, index) => index);\n      trumpOpt = Array.from({length: 5})\n        .fill(0)\n        .map((opt, index) => index);\n    } else if (value === 34) {\n      trickOpt = [];\n      trumpOpt = [];\n    } else if (value % 5 === 4 && value !== 0) {\n      trickOpt = Array.from({length: 7})\n        .fill(0)\n        .map((opt, index) => index)\n        .filter(opt => opt > game.bid.trick);\n      trumpOpt = Array.from({length: 5})\n        .fill(0)\n        .map((opt, index) => index);\n    } else {\n      trickOpt = Array.from({length: 7})\n        .fill(0)\n        .map((opt, index) => index)\n        .filter(opt => opt >= game.bid.trick);\n      trumpOpt = Array.from({length: 5})\n        .fill(0)\n        .map((opt, index) => index)\n        .filter(opt => opt > game.bid.trump);\n    }\n\n    let allTrickOpt = trickOpt.map((opt, index) => (\n      <button\n        className={opt === this.state.current ? \"current\" : null}\n        onClick={() => {\n          this.validateUserTurnAndsetTrump(opt);\n        }}\n        key={getRandomKey()}>\n        {opt + 1}\n      </button>\n    ));\n\n    let selectedTrump =\n            this.state.currentTrick === trickOpt[0]\n              ? trumpOpt\n              : [0, 1, 2, 3, 4];\n\n    if (value === 34) {\n      selectedTrump = [];\n    }\n    selectedTrump = selectedTrump.map(opt => (\n      <div onClick={() => this.updateBid(opt, null)} key={getRandomKey()}>\n        {SUIT_SHAPE[opt](0.25)}\n      </div>\n    ));\n\n    let result = game.bid.result;\n\n    let DoubleBtn = result &&\n            !result[result.length - 1].opt && (\n      <button\n        className=\"d-btn\"\n        onClick={() => this.updateBid(-1, \"Double\")}>\n                    Dboule\n      </button>\n    );\n\n    let ReDoubleBtn = result &&\n            result[result.length - 1].opt === \"Double\" && (\n      <button\n        className=\"d-btn\"\n        onClick={() => this.updateBid(-1, \"ReDouble\")}>\n                    ReDouble\n      </button>\n    );\n\n    let playerThumbnails = this.props.game.players.map((player, index) => (\n      <div\n        key={getRandomKey()}\n        className={\n          index === this.props.game.deal\n            ? \"thumbnail current\"\n            : \"thumbnail\"\n        }>\n        <span>{player[0]}</span>\n      </div>\n    ));\n    if (this.props.isFinishAuction) return null;\n\n    return (\n      <div className=\"auction-inner\">\n        <div className=\"thumbnail-group\">{playerThumbnails}</div>\n        {!game.bid.result && (\n          <div className=\"notes\"> Start Auction </div>\n        )}\n        <AuctionList scale={0.2} result={game.bid.result} />\n        <div className=\"option-wrapper\">\n          {isCurrentUser && (\n            <div className=\"other-btns\">\n              <button\n                className=\"pass\"\n                onClick={() => this.updateBid(null, \"Pass\")}>\n                                Pass\n              </button>\n              {DoubleBtn}\n              {ReDoubleBtn}\n            </div>\n          )}\n          <div className=\"tricks\">{allTrickOpt}</div>\n          {this.state.visibility && (\n            <div className=\"trumps\">{selectedTrump}</div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\n","import \"../style/reset.scss\";\nimport \"../style/player.scss\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nexport const Player = ({name, current=null}) => {\n  return (\n    <div className=\"player\">\n      <div className={current ? \"thumbnail current\" : \"thumbnail\"} />\n      <div className=\"name\">{name}</div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport {getRandomKey} from \"../helper/helper.js\";\nimport {AuctionList} from \"./auctionList.js\";\nimport \"../style/auction.scss\";\n\nexport class AuctionResult extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    let {game, windowWidth, windowHeight} = this.props;\n    if (!game || !game.bid.result) {\n      return null;\n    }\n    let playerThumbnails = game.players.map((player, index) => (\n      <div key={getRandomKey()} className=\"thumbnail\">\n        <span>{player[0]}</span>\n      </div>\n    ));\n    return (\n      <div\n        className=\"auction-result\"\n        style={{\n          top: Math.ceil(windowWidth / 500) * 5,\n          right: Math.ceil(windowWidth / 500) * 5\n        }}>\n        <div className=\"auction-result-inner\">\n          <div className=\"thumbnail-group\">{playerThumbnails}</div>\n          <AuctionList scale={0.15} result={game.bid.result} />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport {EMPTY_SEAT} from \"./constant.js\";\nimport {getRandomKey} from \"../helper/helper.js\";\nimport {dispatchToDatabase} from \"../reducer/reducer.js\";\nimport \"../style/readylist.scss\";\nexport default class PlayerReadyList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setReadyState = this.setReadyState.bind(this);\n  }\n  setReadyState(playerIndex) {\n    let {currentUser, game, tableId, gameIndex} = this.props;\n    let ready = this.props.game.ready;\n    dispatchToDatabase(\"READY_A_PLAYER\", {\n      player: playerIndex,\n      tableId: tableId,\n      game: game,\n      value: true,\n      gameIndex: gameIndex\n    });\n  }\n\n  render() {\n    let {game, currentUser} = this.props;\n    if (!game) {\n      return null;\n    }\n\n    let {players, ready, isGameOver, order} = game;\n\n    let isEmptySeat = players.some(seat => seat === EMPTY_SEAT);\n    let isAllPlayerReady = ready.every(player => player === true);\n    let showPlayerReadyList =\n            (isEmptySeat && order < 0) || !isAllPlayerReady;\n\n    if (!showPlayerReadyList) {\n      return null;\n    }\n    let playBtns = null;\n    let thumbnails = players.map((player, index) => (\n      <div\n        key={getRandomKey()}\n        className={\n          ready[index] === false ? \"thumbnail\" : \"thumbnail ready\"\n        }>\n        <span>{player[0]}</span>\n      </div>\n    ));\n\n    if (players.includes(currentUser)) {\n      playBtns = players.map((player, index) => {\n        if (player === currentUser && !ready[index]) {\n          return (\n            <div key={getRandomKey()}>\n              <button\n                key={getRandomKey()}\n                onClick={() => this.setReadyState(index)}\n                className=\"btn\">\n                                Play\n              </button>\n            </div>\n          );\n        } else {\n          return <div key={getRandomKey()} />;\n        }\n      });\n    }\n\n    return (\n      <div className=\"player-ready-list\">\n        <div className=\"player-ready-list-inner\">\n          <div className=\"row\"> {thumbnails}</div>\n          <div className=\"row\">{playBtns}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// <div className=\"row\">{playBtns}</div>\n// <div className=\"row\" />\n","import \"../style/reset.scss\";\nimport \"../style/game.scss\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {getRandomInt, getRandomKey} from \"../helper/helper.js\";\nimport {dispatch, dispatchToDatabase} from \"../reducer/reducer.js\";\nimport {Card} from \"./card.js\";\nimport Trick from \"./trick.js\";\nimport {CARD_NUM, EMPTY_SEAT, NO_TRUMP, DEFAULT_GAME} from \"./constant.js\";\nimport TrickScore from \"./trickScore.js\";\nimport ScoreBoard from \"./scoreBoard.js\";\nimport Auction from \"./auction.js\";\nimport {Player} from \"./player.js\";\nimport {AuctionResult} from \"./auctionResult.js\";\nimport PlayerReadyList from \"./playerReadyList.js\";\n\nexport default class Game extends React.Component {\n  constructor(props) {\n    super(props);\n    let game = this.props.table[this.props.table.length - 1];\n    this.state = {\n      endAuction: game.order >= 0,\n      windowWidth: window.innerWidth,\n      windowHeight: window.innerHeight\n    };\n    this.currentMaxTrick = this.currentMaxTrick.bind(this);\n    this.deal = this.deal.bind(this);\n    this.getNextMaxTrick = this.getNextMaxTrick.bind(this);\n    this.handleWinner = this.handleWinner.bind(this);\n    this.shuffle = this.shuffle.bind(this);\n    this.suffleCardsWhenReady = this.suffleCardsWhenReady.bind(this);\n    this.endAuction = this.endAuction.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n    // when player is ready, shuffle cards\n    // this.suffleCardsWhenReady();\n  }\n  handleResize() {\n    this.setState({\n      windowWidth: window.innerWidth,\n      height: window.innerHeight\n    });\n  }\n  componentDidMount() {\n    this.handleResize();\n    window.addEventListener(\"resize\", this.handleResize);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleResize);\n  }\n  componentDidUpdate(prevProps) {\n    let newGame = this.props.table[this.props.table.length - 1];\n    let oldGame = prevProps.table[prevProps.table.length - 1];\n    if (\n      !newGame.ready.every(\n        (player, index) => player === oldGame.ready[index],\n      )\n    ) {\n      if (newGame.ready.every(player => player === true)) {\n        this.suffleCardsWhenReady();\n      }\n    }\n  }\n  suffleCardsWhenReady() {\n    // when seats is full and has no cards on databse\n    let table = this.props.table;\n    if (table) {\n      let curentGame = table.slice(0).pop();\n      let isFourSeatsFull = curentGame.players.every(\n        seat => seat !== EMPTY_SEAT,\n      );\n      if (isFourSeatsFull && !curentGame.cards) {\n        this.shuffle();\n      }\n    }\n  }\n\n  // so far, how many tricks have been played ?\n  getNextMaxTrick() {\n    let table = this.props.table;\n    if (!table) {\n      return;\n    }\n    let cards = table[table.length - 1].cards,\n      maxTrick = Math.max(...cards.map(card => card.trick)),\n      maxTrickNum = cards.filter(card => card.trick === maxTrick).length;\n    if (maxTrick === 0 || maxTrickNum >= 4) {\n      return maxTrick + 1;\n    }\n    return maxTrick;\n  }\n  currentMaxTrick() {\n    let table = this.props.table;\n    if (!table) return;\n    let cards = table[table.length - 1].cards;\n    return Math.max(...cards.map(card => card.trick));\n  }\n  handleWinner(value) {\n    let table = this.props.table,\n      game = table[table.length - 1],\n      cards = game.cards,\n      maxTrick = this.currentMaxTrick();\n\n    let {trump} = game.bid;\n    let cardsMatchCurrentTrick = cards\n      .map((card, index) => Object.assign({}, card, {index: index}))\n      .filter(\n        card =>\n          (card.trick === maxTrick && card.trick > 0) ||\n                    card.value === value,\n      );\n    let winnerCard,\n      noTrumpCards = false;\n\n    if (cardsMatchCurrentTrick.length === 4) {\n      // which card is first been played\n      let first = Math.min(\n        ...cardsMatchCurrentTrick.map(card => card.order),\n      );\n      let [firstHand] = cardsMatchCurrentTrick.filter(\n        card => card.order === first,\n      );\n\n      // which card has max value by the bid trump\n      const findMaxValueByTrump = (arr, trump) => {\n        let list = arr\n          .filter(\n            item =>\n              Math.floor(item.value / CARD_NUM.HAND) === trump,\n          )\n          .sort((cardA, cardB) => cardB.value - cardA.value);\n        return list.length ? list[0] : null;\n      };\n\n      // trump matters most, else, decide by what first hand has draw\n      if (trump !== NO_TRUMP) {\n        // filter trump cards, and compare their face value\n        let tmp = findMaxValueByTrump(cardsMatchCurrentTrick, trump);\n        if (tmp !== null) {\n          winnerCard = tmp;\n        } else {\n          noTrumpCards = true;\n        }\n      }\n\n      if (trump === NO_TRUMP || noTrumpCards) {\n        // if their quotient are the same, compare their value, else, let first win\n        let trumpRef = Math.floor(firstHand.value / CARD_NUM.HAND);\n        winnerCard = findMaxValueByTrump(\n          cardsMatchCurrentTrick,\n          trumpRef,\n        );\n      } // end of no trump\n    }\n\n    return winnerCard || null;\n  }\n  endAuction() {\n    this.setState({endAuction: true});\n  }\n\n  deal(value) {\n    let table = this.props.table;\n    if (!table) {\n      return;\n    }\n    let game = table[table.length - 1];\n    let currentPlayer = game.deal;\n    let order = game.order + 1;\n\n    dispatchToDatabase(\"UPDATE_CURRENT_TRICK\", {\n      table: table,\n      value: value,\n      maxTrick: this.getNextMaxTrick(),\n      id: this.props.tableId,\n      order: order,\n      deal: (game.deal + 1) % 4\n    });\n\n    let winnerCard = this.handleWinner(value);\n\n    // make sure winnerCard exists, and write winner to database\n    if (winnerCard) {\n      // remove index data while dispatch to database\n      let card = Object.assign({}, winnerCard);\n      delete card.index;\n\n      dispatchToDatabase(\"UPDATE_WINNER_CARD\", {\n        winnerCard: card,\n        order: order,\n        deal: card.player,\n        table: table,\n        id: this.props.tableId\n      });\n    }\n  }\n  shuffle() {\n    // refactor this to other function\n    // default bid trick / trump option\n    // create array from 0 - 51\n    let cards = Array.from({length: CARD_NUM.TOTAL})\n      .fill(0)\n      .map((card, i) => i);\n\n    // shuffle array algorithm\n    for (let i = cards.length - 1; i > 0; i--) {\n      let randomIndex = getRandomInt(0, CARD_NUM.TOTAL - 1);\n      [cards[i], cards[randomIndex]] = [cards[randomIndex], cards[i]];\n    }\n\n    // get new cards\n    cards = cards.map(card => ({\n      value: card,\n      trick: 0\n    }));\n\n    // todo bid\n    dispatchToDatabase(\"ADD_NEW_DECK_TO_TABLE\", {\n      table: this.props.table,\n      id: this.props.tableId,\n      cards: cards\n    });\n  }\n\n  render() {\n    let table = this.props.table;\n    let game = table.map(game => Object.assign({}, game)).pop();\n    let {cards, players, ready, isGameOver} = game;\n\n    // what is the first card of current trick\n    // in order to let players only can draw card as the same suit\n    let firstCard;\n    // every run, first player to draw can draw any card\n    if (cards && cards.length >= 4 && game.order % 4 !== 3) {\n      firstCard =\n                cards\n                  .filter(card => card.order % 4 === 0)\n                  .sort((cardA, cardB) => cardB.order - cardA.order)[0] ||\n                null;\n    }\n    let isEndOfCurrentTrick = game.order % 4 === 3;\n\n    // check if fishish auction\n    let isFinishAuction;\n    if (game && game.bid && game.bid.result) {\n      let result = game.bid.result;\n      isFinishAuction =\n                result.length >= 4 &&\n                result.some(bid => bid.trick >= 0) &&\n                result\n                  .slice(result.length - 3)\n                  .every(res => res.opt === \"Pass\");\n    }\n\n    // set true to give dummy's card to declarer\n    let dummyMode = isFinishAuction && true;\n\n    // class name for each hand\n    let direction = [\"south\", \"west\", \"north\", \"east\"];\n\n    let cardsByPlayer, playerIDByCurrentUser, hands;\n\n    // turn cards to 4 hands\n    if (cards && cards.length === CARD_NUM.TOTAL) {\n      cardsByPlayer = players.map((userIndex, index) => {\n        return cards.filter((card, i) => i % players.length === index);\n      });\n\n      // shift current user's index to zero, so their cards will\n      // shown on bottom\n\n      let currentUserIndex = players.findIndex(\n        user => user === this.props.currentUser,\n      );\n\n      // if current user is a player, shift card\n      if (!(currentUserIndex < 0)) {\n        cardsByPlayer = [\n          ...cardsByPlayer.slice(currentUserIndex),\n          ...cardsByPlayer.slice(0, currentUserIndex)\n        ];\n        playerIDByCurrentUser = [\n          ...players.slice(currentUserIndex),\n          ...players.slice(0, currentUserIndex)\n        ];\n      }\n\n      // create dom element by cards in user's hand\n      let flipIndex = dummyMode ? (game.bid.declarer + 2) % 4 : 6;\n      if (flipIndex < 4) {\n        flipIndex = playerIDByCurrentUser.findIndex(\n          player => player === game.players[flipIndex],\n        );\n      }\n\n      hands = cardsByPlayer.map((hand, index) => {\n        let player = playerIDByCurrentUser[index];\n        let playerIndex = index; // zero will alwasy be current login user\n\n        // makesure dummy hand can view declarer's card\n        if (flipIndex === 0) {\n          flipIndex = 2;\n        }\n\n        hand = hand\n          .sort((a, b) => a.value - b.value)\n          .filter(card => card.trick === 0);\n        if (index === 1) {\n          hand = hand.sort((a, b) => b.value - a.value);\n        }\n\n        let currentUserIndex = game.players.findIndex(\n          player => player === this.props.currentUser,\n        );\n\n        currentUserIndex = 0;\n\n        // handle display issue for both weat/east players\n        let handCopy = hand.map(userHand =>\n          Object.assign({}, userHand),\n        );\n        let display = [[], [], [], []];\n        let newHand = handCopy.map(card =>\n          display[Math.floor(card.value / 13)].push(card),\n        );\n\n        // handle flip down card, group them into n rows base on\n        // how many cards left\n        display = display.filter(item => item.length !== 0);\n        // decide to flip down which players card\n        // use playerIndex to decide , playerIndex 0 means current user\n\n        if (\n          playerIndex !== currentUserIndex &&\n                    playerIndex !== flipIndex\n        ) {\n          let flat = display.flat();\n          let len = flat.length;\n          if (Math.floor(len / 3) < 1 && len > 1) {\n            let mid = Math.floor(len / 2);\n            flat = [flat.slice(0, mid), flat.slice(mid, len)];\n            display = flat;\n          } else if (Math.floor(len / 3) > 1) {\n            let threeRow = [[], [], []];\n            flat.map((card, index) =>\n              threeRow[index % 3].push(card),\n            );\n            display = threeRow;\n          }\n        }\n\n        // handle sort isssue of west player, should sort\n        // from big to small\n\n        let cardItems = display.flat();\n        let hasSameSuitWithFirstCard =\n                    firstCard &&\n                    cardItems.filter(card => {\n                      return (\n                        Math.floor(card.value / 13) ===\n                            Math.floor(firstCard.value / 13)\n                      );\n                    }).length > 0;\n\n        let cardsInHand = display.map((each, index) => {\n          // use playerIndex to decide flip up whose cards\n          // playerIndex === 0 means current user\n\n          let canBeClick =\n                        isFinishAuction &&\n                        players[game.deal] === player &&\n                        playerIndex === currentUserIndex;\n\n          let flipUp =\n                        playerIndex === currentUserIndex ||\n                        playerIndex === flipIndex;\n\n          // if those card has same suit with first player,\n          // users need only to draw those cards\n          // if not, they can draw any cards\n          let allowClickEvt = card => {\n            return (\n              firstCard === null ||\n                            !hasSameSuitWithFirstCard ||\n                            Math.floor(card.value / 13) ===\n                                Math.floor(firstCard.value / 13)\n            );\n          };\n\n          return each.map((card, i) => (\n            <Card\n              name={\n                canBeClick && allowClickEvt(card)\n                  ? `click-able l${index} item-${i}`\n                  : `l${index} item-${i}`\n              }\n              flipUp={flipUp}\n              evt={\n                canBeClick && allowClickEvt(card)\n                  ? this.deal\n                  : null\n              }\n              key={getRandomKey()}\n              value={card.value}\n            />\n          ));\n        });\n\n        // calculate hand style and card postion\n        let totalCardsInHand = cardsInHand\n          .map(suit => suit.length)\n          .reduce((sum, len) => sum + len, 0);\n        let totalSuitType = cardsInHand.filter(\n          suit => suit.length !== 0,\n        ).length;\n\n        let horCardStyle =\n                    direction[index] === \"north\" || direction[index] === \"south\"\n                      ? {\n                        left:\n                                  (this.state.windowWidth -\n                                      (50 * totalCardsInHand + 50)) /\n                                  2\n                      }\n                      : null;\n\n        const getHandHeight = suitNum => {\n          let cardh = 125,\n            shift = 80;\n          return (\n            suitNum * cardh - (cardh - shift) * (suitNum - 1) + 10\n          );\n        };\n\n        let verCardStyle =\n                    direction[index] === \"west\" || direction[index] === \"east\"\n                      ? {\n                        top:\n                                  (this.state.windowHeight -\n                                      getHandHeight(totalSuitType)) /\n                                  2\n                      }\n                      : null;\n\n        return (\n          <div\n            className={direction[index]}\n            style={horCardStyle || verCardStyle}\n            key={getRandomKey()}>\n            <div className=\"hand-inner\">\n              <div className=\"user-hand\">{cardsInHand}</div>\n              <Player\n                current={\n                  players[game.deal] === player &&\n                                    isFinishAuction\n                }\n                name={player}\n              />\n            </div>\n          </div>\n        );\n      });\n    } // end of cards\n\n    // dom elements\n\n    if (isGameOver) {\n      return (\n        <div className=\"game\">\n          <div>\n            <ScoreBoard\n              startGame={this.suffleCardsWhenReady}\n              currentUser={this.props.currentUser}\n              windowWidth={this.state.windowWidth}\n              widnowHeight={this.state.windowHeight}\n              tableId={this.props.tableId}\n              gameIndex={table.length - 1}\n              game={game}\n              table={this.props.table}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    let isAllReady = game.ready.every(player => player === true);\n\n    return (\n      <div className=\"game\">\n        {!isAllReady && (\n          <PlayerReadyList\n            suffleCardsWhenReady={this.suffleCardsWhenReady}\n            currentUser={this.props.currentUser}\n            game={game}\n            tableId={this.props.tableId}\n            gameIndex={table.length - 1}\n          />\n        )}\n        {\n          // should delete this\n          //\n          // <div>\n          //   <ScoreBoard\n          //     startGame={this.suffleCardsWhenReady}\n          //     currentUser={this.props.currentUser}\n          //     windowWidth={this.state.windowWidth}\n          //     widnowHeight={this.state.windowHeight}\n          //     tableId={this.props.tableId}\n          //     gameIndex={table.length - 1}\n          //     game={game}\n          //   />\n          // </div>\n        }\n        {\n          // should delete this\n        }\n        {isFinishAuction && (\n          <AuctionResult\n            windowWidth={this.state.windowWidth}\n            windowHeight={this.state.windowHeight}\n            game={game}\n          />\n        )}\n        <div className=\"auction\">\n          {game.bid &&\n                        game.cards && (\n            <Auction\n              currentUser={this.props.currentUser}\n              isFinishAuction={isFinishAuction}\n              endAuction={this.endAuction}\n              gameIndex={table.length - 1}\n              game={game}\n              tableId={this.props.tableId}\n            />\n          )}\n        </div>\n        <div className=\"arena\">\n          <div className=\"hands\">{hands}</div>\n          <Trick\n            cards={cards}\n            cardsByPlayer={cardsByPlayer}\n            currentMaxTrick={this.currentMaxTrick}\n            order={game.order}\n            isTrickFinish={isEndOfCurrentTrick}\n          />\n          <TrickScore\n            resizeRatio={0.15}\n            innerStyle={{\n              bottom: Math.ceil(this.state.windowWidth / 500) * 5,\n              right: Math.ceil(this.state.windowWidth / 500) * 5\n            }}\n            thumbnailSize={30}\n            name=\"right-bottom-pos\"\n            windowWidth={this.state.windowWidth}\n            widnowHeight={this.state.windowHeight}\n            game={game}\n          />\n        </div>\n        <div className=\"sidebar\" />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {Link} from \"react-router-dom\";\nimport {dispatch, store} from \"../reducer/reducer.js\";\n\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"leslie\"\n    };\n    this.handleName = this.handleName.bind(this);\n  }\n  handleName(e) {\n    this.setState({name: e.target.value});\n  }\n\n  render() {\n    return (\n      <div>\n                login Component\n        <input\n          onChange={this.handleName}\n          type=\"text\"\n          value={this.state.name}\n        />\n        <Link\n          onClick={() => this.props.login(this.state.name)}\n          to=\"/lobby\">\n                    login\n        </Link>\n        <br />\n        <Link onClick={() => this.props.login(\"1\")} to=\"/lobby\">\n                    player 1\n        </Link>\n        <br />\n        <Link onClick={() => this.props.login(\"2\")} to=\"/lobby\">\n                    player 2\n        </Link>\n        <br />\n        <Link onClick={() => this.props.login(\"3\")} to=\"/lobby\">\n                    player 3 \n        </Link>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class CreateTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return <div>CreateTable Component section</div>;\n  }\n}\n","import React from \"react\";\nimport Game from \"./game.js\";\nimport {getRandomInt, getRandomKey} from \"../helper/helper.js\";\nimport {dispatch, dispatchToDatabase} from \"../reducer/reducer.js\";\nexport default class Table extends React.Component {\n  constructor(props) {\n    super(props);\n    this.createNewGame = this.createNewGame.bind(this);\n  }\n  createNewGame() {\n    let tableId = this.props.match.params.id;\n    // append a new game to databse\n    // dispatchToDatabase(\"CREATE_NEW_GAME\", {\n    //   tableId: tableId,\n    //   table: this.props.tables[tableId]\n    // });\n  }\n  render() {\n    let tableId = this.props.match.params.id;\n    return (\n      <div>\n        <Game\n          createNewGame={this.createNewGame}\n          currentUser={this.props.currentUser}\n          tableId={tableId}\n          table={this.props.tables[tableId]}\n        />\n      </div>\n    );\n  }\n}\n","import \"../style/reset.scss\";\nimport \"../style/header.scss\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {Link} from \"react-router-dom\";\nimport logoImg from \"../images/logo.png\";\nimport messageSvg from \"../images/message.svg\";\nimport {dispatchToDatabase} from \"../reducer/reducer.js\";\n\nexport default class Header extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n      <header>\n        <div>\n          <Link to=\"/\">\n            <img src={logoImg} />\n            <h1>Bridge Together</h1>\n          </Link>\n        </div>\n        <div>\n          <img src={messageSvg} />\n          <div>{this.props.user || \"Sign In / Sign Up\"}</div>\n        </div>\n      </header>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport {Link} from \"react-router-dom\";\nimport {getRandomKey} from \"../helper/helper.js\";\nimport {dispatch} from \"../reducer/reducer.js\";\nimport {EMPTY_SEAT} from \"../components/constant.js\";\nimport {getObj} from \"../helper/helper.js\";\nimport {app} from \"../firebase/firebase.js\";\nimport {dispatchToDatabase} from \"../reducer/reducer.js\";\n\nexport default class TableList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.addPlayerToTable = this.addPlayerToTable.bind(this);\n    this.createTable = this.createTable.bind(this);\n  }\n  componentDidMount() {\n    console.log(\"component did mount\", this.props.tables);\n    // should refactor this, write a promise for timeOut;\n    setTimeout(() => {\n      if (!this.props.tables) {\n        this.createTable();\n      }\n    }, 1500);\n\n  }\n  createTable() {\n    let {tables} = this.props;\n    let newTableId = tables ? tables.length : 0;\n    dispatchToDatabase(\"CREATE_TABLE\", {\n      tableId: newTableId,\n      currentUser: this.props.currentUser\n    });\n  }\n  addPlayerToTable(id) {\n    let tables = this.props.tables;\n    if (!tables) return;\n    dispatchToDatabase(\"ADD_PLAYER_TO_TABLE\", {\n      table: tables[id],\n      currentUser: this.props.currentUser,\n      id: id\n    });\n  }\n  render() {\n    let {tables} = this.props;\n    if (!tables) {\n      return <div>loading table data...</div>;\n    }\n    let tablesLink = tables.map((table, index) => {\n      return (\n        <Link\n          key={getRandomKey()}\n          onClick={() => this.addPlayerToTable(index)}\n          to={`/table/${index}`}>\n                     {index} \n        </Link>\n      );\n    });\n    let lastIndex = tables.length;\n    console.log(\"lastIndex\", lastIndex);\n    return (\n      <div>\n        <Link onClick={this.createTable} to={`/table/${lastIndex}`}>\n                    create table\n        </Link>\n        {tablesLink}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport {\n  IndexRoute,\n  BrowserRouter,\n  Router,\n  Route,\n  Switch,\n  Link\n} from \"react-router-dom\";\nimport TableList from \"./tableList.js\";\n\nexport default class Lobby extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n      <div>\n            this is lobby table list\n        <TableList currentUser={this.props.currentUser} tables={this.props.tables} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\n\nexport default class Loading extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return <div>loading...</div>;\n  }\n}\n","import \"./style/main.scss\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Game from \"./components/game.js\";\nimport Login from \"./components/login.js\";\nimport CreateTable from \"./components/createTable.js\";\nimport Table from \"./components/table.js\";\nimport Header from \"./components/header.js\";\nimport Lobby from \"./components/lobby.js\";\nimport Loading from \"./components/loading.js\";\nimport {\n  IndexRoute,\n  BrowserRouter,\n  Router,\n  Route,\n  Switch,\n  Link\n} from \"react-router-dom\";\nimport {dispatch, store} from \"./reducer/reducer.js\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = store.getState();\n    this.handleLogin = this.handleLogin.bind(this);\n    this.update = this.update.bind(this);\n    this.stopLoading = this.stopLoading.bind(this);\n  }\n  update() {\n    this.setState(store.getState());\n  }\n  componentDidUnMount() {\n    this.unSubscribe();\n  }\n  componentDidMount() {\n    this.unSubscribe = store.subscribe(this.update.bind(this));\n    this.stopLoading();\n    // setTimeout(this.stopLoading, 10);\n  }\n  handleLogin(name) {\n    dispatch(\"HANDLE_LOGIN\", {name: name});\n  }\n  stopLoading() {\n    dispatch(\"STOP_LOADING\", {isLoad: true});\n  }\n  render() {\n    if (!this.state.isLoad) {\n      return <Loading />;\n    }\n    return (\n      <div>\n        <BrowserRouter>\n          <div>\n            <Header user={this.state.currentUser} />\n            {!this.state.currentUser && (\n              <Route\n                path=\"/\"\n                render={props => (\n                  <Login login={this.handleLogin} />\n                )}\n              />\n            )}\n            {this.state.currentUser && (\n              <div>\n                <Route\n                  path=\"/table/:id\"\n                  render={props => (\n                    <Table\n                      currentUser={this.state.currentUser}\n                      tables={this.state.tables}\n                      {...props}\n                    />\n                  )}\n                />\n                <Route\n                  exact\n                  path=\"/lobby\"\n                  render={() => (\n                    <Lobby\n                      currentUser={this.state.currentUser}\n                      tables={this.state.tables}\n                    />\n                  )}\n                />\n                <Route\n                  exact\n                  path=\"/createTable\"\n                  render={() => <CreateTable />}\n                />\n              </div>\n            )}\n          </div>\n        </BrowserRouter>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<App />, document.getElementById(\"main\"));\n"],"sourceRoot":""}